--- /dev/null	2009-10-29 20:00:29.463258316 +0100
+++ patches/icedtea-shmproto.patch	2009-10-29 21:02:36.000000000 +0100
@@ -0,0 +1,13 @@
+--- openjdk/jdk/src/solaris/native/sun/awt/awt_GraphicsEnv.c.orig	2009-10-29 21:01:01.000000000 +0100
++++ openjdk/jdk/src/solaris/native/sun/awt/awt_GraphicsEnv.c	2009-10-29 21:01:56.000000000 +0100
+@@ -45,6 +45,10 @@
+ #include <stdlib.h>
+ 
+ #include "awt_GraphicsEnv.h"
++#ifdef MITSHM
++#include <X11/Xmd.h>
++#include <X11/extensions/shmproto.h>
++#endif
+ #include "awt_Window.h"
+ #include "awt_util.h"
+ #include "gdefs.h"
--- Makefile.am.orig	2009-10-29 21:35:23.000000000 +0100
+++ Makefile.am	2009-10-29 21:35:50.000000000 +0100
@@ -708,6 +708,7 @@
 	patches/icedtea-explicit-target-arch.patch \
 	patches/openjdk/6648816.patch \
 	patches/openjdk/oj100103-debugger-socket-overflow.patch \
+	patches/icedtea-shmproto.patch \
 	$(DISTRIBUTION_PATCHES)
 
 stamps/extract.stamp: stamps/download.stamp
