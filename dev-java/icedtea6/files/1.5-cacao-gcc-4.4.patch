# HG changeset patch
# User Andrew John Hughes <ahughes@redhat.com>
# Date 1245174543 -3600
# Node ID 883001a6b00ead3fa58f0c12ac60ced3832ba326
# Parent  b88686f19b34952c3c0e581d52507695aecb2ff2
Fix CACAO build with GCC 4.4

diff -r b88686f19b34 -r 883001a6b00e Makefile.am
--- a/Makefile.am	Mon Jun 15 15:44:37 2009 -0400
+++ b/Makefile.am	Tue Jun 16 18:49:03 2009 +0100
@@ -614,7 +614,8 @@
 if BUILD_CACAO
 ICEDTEA_PATCHES += \
 	patches/icedtea-cacao.patch \
-	patches/icedtea-cacao-no-mmap-first-page.patch
+	patches/icedtea-cacao-no-mmap-first-page.patch \
+	patches/cacao/no-strict-aliasing.patch
 endif
 if WITH_CACAO
 ICEDTEA_PATCHES += \
diff -r b88686f19b34 -r 883001a6b00e patches/cacao/no-strict-aliasing.patch
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/patches/cacao/no-strict-aliasing.patch	Tue Jun 16 18:49:03 2009 +0100
@@ -0,0 +1,12 @@
+diff -ur cacao-0.99.4.orig/configure cacao-0.99.4/configure
+--- cacao.orig/cacao/configure		2009-03-16 12:44:25.000000000 +0100
++++ cacao/cacao/configure		2009-06-05 17:58:48.000000000 +0200
+@@ -2825,7 +2825,7 @@
+ 
+ 
+ if test x"$CFLAGS" = "x"; then
+-    OPT_CFLAGS="-g -O2"
++    OPT_CFLAGS="-g -O2 -fno-strict-aliasing"
+ else
+     OPT_CFLAGS=$CFLAGS
+ fi
