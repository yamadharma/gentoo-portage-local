Index: openjdk/j2se/make/sun/splashscreen/FILES_c.gmk
===================================================================
--- openjdk.orig/j2se/make/sun/splashscreen/FILES_c.gmk
+++ openjdk/j2se/make/sun/splashscreen/FILES_c.gmk
@@ -51,8 +51,10 @@ FILES_c = \
 	$(CTARGDIR)pngwutil.c \
 	$(CTARGDIR)dgif_lib.c \
 	$(CTARGDIR)gif_err.c \
-	$(CTARGDIR)gifalloc.c \
-	$(CTARGDIR)jcomapi.c \
+	$(CTARGDIR)gifalloc.c
+
+ifneq ($(EXTERNAL_JPEG), true)
+FILES_c += $(CTARGDIR)jcomapi.c \
 	$(CTARGDIR)jdapimin.c \
 	$(CTARGDIR)jdapistd.c \
 	$(CTARGDIR)jdcoefct.c \
@@ -96,6 +98,7 @@ FILES_c = \
 	$(CTARGDIR)jfdctflt.c \
 	$(CTARGDIR)jfdctfst.c \
 	$(CTARGDIR)jfdctint.c
+endif
 
 ifneq ($(EXTERNAL_ZLIB),true)
 FILES_c += $(CTARGDIR)compress.c \
Index: openjdk/j2se/make/sun/splashscreen/Makefile
===================================================================
--- openjdk.orig/j2se/make/sun/splashscreen/Makefile
+++ openjdk/j2se/make/sun/splashscreen/Makefile
@@ -83,13 +83,18 @@ vpath %.c   $(SHARE_SRC)/native/$(PKGDIR
 vpath %.c   $(PLATFORM_SRC)/native/$(PKGDIR)/splashscreen
 
 CPPFLAGS += -I$(PLATFORM_SRC)/native/$(PKGDIR)/splashscreen -I$(SHARE_SRC)/native/$(PKGDIR)/splashscreen
-CPPFLAGS += -I$(SHARE_SRC)/native/$(PKGDIR)/image/jpeg
 
 #
 # Has been converted to the JNI: generate JNI-style header files
 #
 JAVAHFLAGS += -jni
 
+ifeq ($(EXTERNAL_JPEG), true)
+  OTHER_LDLIBS += -ljpeg
+else
+  CPPFLAGS += -I$(SHARE_SRC)/native/$(PKGDIR)/image/jpeg
+endif
+
 ifeq ($(EXTERNAL_ZLIB), true)
   OTHER_LDLIBS += -lz
 else
Index: openjdk/j2se/src/share/native/sun/awt/splashscreen/splashscreen_jpeg.c
===================================================================
--- openjdk.orig/j2se/src/share/native/sun/awt/splashscreen/splashscreen_jpeg.c
+++ openjdk/j2se/src/share/native/sun/awt/splashscreen/splashscreen_jpeg.c
@@ -25,7 +25,6 @@
 
 #include "splashscreen_impl.h"
 
-#include "jinclude.h"
 #include "jpeglib.h"
 #include "jerror.h"
 
@@ -107,11 +106,11 @@ set_stream_src(j_decompress_ptr cinfo, S
     if (cinfo->src == NULL) {   /* first time for this JPEG object? */
         cinfo->src = (struct jpeg_source_mgr *)
             (*cinfo->mem->alloc_small) ((j_common_ptr) cinfo, 
-            JPOOL_PERMANENT, SIZEOF(stream_source_mgr));
+            JPOOL_PERMANENT, sizeof(stream_source_mgr));
         src = (stream_src_ptr) cinfo->src;
         src->buffer = (JOCTET *)
             (*cinfo->mem->alloc_small) ((j_common_ptr) cinfo, 
-            JPOOL_PERMANENT, INPUT_BUF_SIZE * SIZEOF(JOCTET));
+            JPOOL_PERMANENT, INPUT_BUF_SIZE * sizeof(JOCTET));
     }
 
     src = (stream_src_ptr) cinfo->src;
