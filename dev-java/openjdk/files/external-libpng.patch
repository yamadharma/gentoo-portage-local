Index: openjdk/j2se/make/sun/splashscreen/FILES_c.gmk
===================================================================
--- openjdk.orig/j2se/make/sun/splashscreen/FILES_c.gmk
+++ openjdk/j2se/make/sun/splashscreen/FILES_c.gmk
@@ -33,8 +33,10 @@ FILES_c = \
 	$(CTARGDIR)splashscreen_impl.c \
 	$(CTARGDIR)splashscreen_jpeg.c \
 	$(CTARGDIR)splashscreen_png.c \
-	$(CTARGDIR)splashscreen_sys.c \
-	$(CTARGDIR)png.c \
+	$(CTARGDIR)splashscreen_sys.c
+
+ifneq ($(EXTERNAL_LIBPNG), true)
+FILES_c += $(CTARGDIR)png.c \
 	$(CTARGDIR)pngerror.c \
 	$(CTARGDIR)pngget.c \
 	$(CTARGDIR)pngmem.c  \
@@ -49,6 +51,7 @@ FILES_c = \
 	$(CTARGDIR)pngwrite.c \
 	$(CTARGDIR)pngwtran.c \
 	$(CTARGDIR)pngwutil.c
+endif
 
 ifneq ($(EXTERNAL_GIFLIB), true)
 FILES_c += $(CTARGDIR)dgif_lib.c \
Index: openjdk/j2se/make/sun/splashscreen/Makefile
===================================================================
--- openjdk.orig/j2se/make/sun/splashscreen/Makefile
+++ openjdk/j2se/make/sun/splashscreen/Makefile
@@ -89,6 +89,12 @@ CPPFLAGS += -I$(PLATFORM_SRC)/native/$(P
 #
 JAVAHFLAGS += -jni
 
+ifeq ($(EXTERNAL_LIBPNG), true)
+  OTHER_LDLIBS += -lpng
+else
+  CPPFLAGS += -I$(SHARE_SRC)/native/sun/awt/libpng
+endif
+
 ifeq ($(EXTERNAL_GIFLIB), true)
   OTHER_LDLIBS += -lgif
 endif
Index: openjdk/j2se/src/share/native/sun/awt/splashscreen/splashscreen_png.c
===================================================================
--- openjdk.orig/j2se/src/share/native/sun/awt/splashscreen/splashscreen_png.c
+++ openjdk/j2se/src/share/native/sun/awt/splashscreen/splashscreen_png.c
@@ -25,7 +25,7 @@
 
 #include "splashscreen_impl.h"
 
-#include "../libpng/png.h"
+#include "png.h"
 
 #include <setjmp.h>
 
