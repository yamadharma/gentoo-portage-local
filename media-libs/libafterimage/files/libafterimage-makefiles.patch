diff -Nur libAfterImage-1.07/afterbase.h libAfterImage-1.07.new/afterbase.h
--- libAfterImage-1.07/afterbase.h	1970-01-01 01:00:00.000000000 +0100
+++ libAfterImage-1.07.new/afterbase.h	2006-09-13 12:00:58.000000000 +0100
@@ -0,0 +1,39 @@
+#ifndef AFTERBASE_H_HEADER_INCLUDED
+#define AFTERBASE_H_HEADER_INCLUDED
+
+#define HAVE_AFTERBASE_FLAG 0
+
+#if 0
+# if 0
+#include <libAfterBase/astypes.h>
+#include <libAfterBase/audit.h>
+#include <libAfterBase/output.h>
+#include <libAfterBase/safemalloc.h>
+#include <libAfterBase/mystring.h>
+#include <libAfterBase/fs.h>
+#include <libAfterBase/parse.h>
+#include <libAfterBase/selfdiag.h>
+#include <libAfterBase/sleep.h>
+#include <libAfterBase/socket.h>
+#include <libAfterBase/trace.h>
+# else
+#include "libAfterBase/astypes.h"
+#include "libAfterBase/audit.h"
+#include "libAfterBase/output.h"
+#include "libAfterBase/safemalloc.h"
+#include "libAfterBase/mystring.h"
+#include "libAfterBase/fs.h"
+#include "libAfterBase/parse.h"
+#include "libAfterBase/selfdiag.h"
+#include "libAfterBase/sleep.h"
+#include "libAfterBase/socket.h"
+#include "libAfterBase/trace.h"
+# endif
+#else
+
+# include "asim_afterbase.h"
+
+#endif /* HAVE_AFTERBASE */
+
+#endif /* AFTERBASE_H_HEADER_INCLUDED */
+
diff -Nur libAfterImage-1.07/afterimage-config libAfterImage-1.07.new/afterimage-config
--- libAfterImage-1.07/afterimage-config	1970-01-01 01:00:00.000000000 +0100
+++ libAfterImage-1.07.new/afterimage-config	2006-09-13 12:00:58.000000000 +0100
@@ -0,0 +1,136 @@
+#! /bin/sh
+
+prefix=/usr/local
+exec_prefix=/usr/local
+AFTERIMAGE_LIBS="-L/usr/local/lib -lAfterImage  -lfreetype -lz -ltiff -lX11 -L/usr/lib64 -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm"
+AFTERIMAGE_LIBS_EXTERNAL="-lfreetype -lz -ltiff -lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm"
+HAVE_AFTERBASE="no"
+AFTERIMAGE_PREF_FORMAT="png"
+
+
+usage()
+{
+  cat <<EOF
+Usage: afterimage-config [OPTIONS] [LIBRARIES]
+Options:
+ [--prefix[=DIR]]
+ [--exec-prefix[=DIR]]
+ [--version]
+ [--libs [--external-only]] 
+ [--libtool]
+ [--cflags]
+ [--have-afterbase]
+ [--preferred-image-format]
+EOF
+  exit $1
+}
+
+if test $# -eq 0 ; then
+  usage 1 1>&2
+fi
+
+while test $# -gt 0 ; do
+  case "$1" in
+  -*=*) optarg=`echo "$1" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
+  *) optarg= ;;
+  esac
+
+  case $1 in
+  --prefix=*)
+    prefix=$optarg
+    local_prefix=yes
+    ;;
+  --prefix)
+    echo_prefix=yes
+    ;;
+  --exec-prefix=*)
+    exec_prefix=$optarg
+    exec_prefix_set=yes
+    local_prefix=yes
+    ;;
+  --exec-prefix)
+    echo_exec_prefix=yes
+    ;;
+  --version)
+    echo 1.07
+    exit 0
+    ;;
+  --cflags)
+    echo_cflags=yes
+    ;;
+  --libs)
+    echo_libs=yes
+    ;;
+  --libtool)
+    echo_libtool=yes
+    ;;
+  --have-afterbase)
+    echo_have_afterbase=yes
+    ;;
+  --preferred-image-format)
+    echo_preferred_image_format=yes
+    ;;
+  --external-only)
+    echo_external_only=yes
+    ;;
+  *)
+    usage 1 1>&2
+    ;;
+  esac
+  shift
+done
+
+if test "$local_prefix" = "yes" ; then
+    if test "$exec_prefix_set" != "yes" ; then
+      exec_prefix=$prefix
+    fi
+fi
+
+if test "$echo_prefix" = "yes" ; then
+ echo $prefix
+fi
+
+if test "$echo_exec_prefix" = "yes" ; then
+ echo $exec_prefix
+fi
+
+if test "$echo_cflags" = "yes" ; then
+ cflags="-I/usr/local/include/libAfterImage"
+ if test "/usr/local/include" != "/usr/include" ; then
+  echo $cflags -I/usr/local/include
+ else
+  echo $cflags
+ fi
+fi
+
+if test "$echo_libs" = "yes" ; then
+ libs="$AFTERIMAGE_LIBS_EXTERNAL"
+ if test "$echo_external_only" != "yes"; then 
+ 	if test "no" = "yes" ; then
+        	libs="-lAfterBase $libs"
+ 	fi
+ 	libs="-lAfterImage $libs" 
+	if test "/usr/local/lib" != "/usr/lib" ; then
+  		echo -L/usr/local/lib $libs
+ 	else
+  		echo $libs
+ 	fi
+ else
+        echo $libs
+ fi
+fi
+
+if test "$echo_libtool" = "yes" ; then
+ convlib="libAfterImage.la"
+ echo /usr/local/lib/$convlib
+fi
+
+if test "$echo_have_afterbase" = "yes" ; then
+ echo "no"
+fi
+
+if test "$echo_preferred_image_format" = "yes" ; then
+ echo "png"
+fi
+
+# EOF
diff -Nur libAfterImage-1.07/afterimage-libs libAfterImage-1.07.new/afterimage-libs
--- libAfterImage-1.07/afterimage-libs	1970-01-01 01:00:00.000000000 +0100
+++ libAfterImage-1.07.new/afterimage-libs	2006-09-13 12:00:58.000000000 +0100
@@ -0,0 +1,27 @@
+#! /bin/sh
+#
+
+AFTERIMAGE_LIBS="-L/usr/local/lib -lAfterImage  -lfreetype -lz -ltiff -lX11 -L/usr/lib64 -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm"
+AFTERIMAGE_LIBS_EXTERNAL="-lfreetype -lz -ltiff -lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm"
+HAVE_AFTERBASE="no"
+AFTERIMAGE_PREF_FORMAT="png"
+
+export AFTERIMAGE_LIBS
+export AFTERIMAGE_LIBS_EXTERNAL
+export HAVE_AFTERBASE
+export AFTERIMAGE_PREF_FORMAT
+
+if test "x$1" = "x--external-only" ; then
+	echo $AFTERIMAGE_LIBS_EXTERNAL
+else
+  if test "x$1" = "x--have-afterbase" ; then
+	echo $HAVE_AFTERBASE
+  else
+        if test "x$1" = "x--preferred-image-format" ; then
+                echo $AFTERIMAGE_PREF_FORMAT
+        else
+                echo $AFTERIMAGE_LIBS
+        fi
+  fi
+fi
+exit 0
diff -Nur libAfterImage-1.07/apps/config.h libAfterImage-1.07.new/apps/config.h
--- libAfterImage-1.07/apps/config.h	1970-01-01 01:00:00.000000000 +0100
+++ libAfterImage-1.07.new/apps/config.h	2006-09-13 12:00:59.000000000 +0100
@@ -0,0 +1,177 @@
+/* config.h.  Generated by configure.  */
+/* config.h.in.  Generated from configure.in by autoheader.  */
+
+/* Define if memory allocation logging and debugging is desired */
+/* #undef DEBUG_ALLOCS */
+
+/* Define if libAfterBase is available */
+/* #undef HAVE_AFTERBASE */
+
+/* Define if using builtin libjpeg */
+/* #undef HAVE_BUILTIN_JPEG */
+
+/* Define if using builtin libpng */
+/* #undef HAVE_BUILTIN_PNG */
+
+/* Define if using builtin libungif */
+#define HAVE_BUILTIN_UNGIF 1
+
+/* Define to 1 if you have the <dirent.h> header file, and it defines `DIR'.
+   */
+#define HAVE_DIRENT_H 1
+
+/* Define to 1 if you have the <errno.h> header file. */
+#define HAVE_ERRNO_H 1
+
+/* Define if libFreeType is available */
+#define HAVE_FREETYPE 1
+
+/* Define if libFreeType has freetype.h in freetype/ */
+#define HAVE_FREETYPE_FREETYPE 1
+
+/* Define to 1 if you have the <ft2build.h> header file. */
+#define HAVE_FT2BUILD_H 1
+
+/* Define if libgif/ungif is available */
+#define HAVE_GIF 1
+
+/* Support for OpenGL extention */
+#define HAVE_GLX 1
+
+/* Define to 1 if you have the <inttypes.h> header file. */
+#define HAVE_INTTYPES_H 1
+
+/* Define if libjpeg is available */
+#define HAVE_JPEG 1
+
+/* Define if support for XPM images should be through libXpm */
+/* #undef HAVE_LIBXPM */
+
+/* Define if support for XPM images should be through libXpm library in Xlib
+   */
+/* #undef HAVE_LIBXPM_X11 */
+
+/* Define to 1 if the system has the type `long long'. */
+#define HAVE_LONG_LONG 1
+
+/* Define to 1 if you have the <malloc.h> header file. */
+#define HAVE_MALLOC_H 1
+
+/* Define to 1 if you have the <memory.h> header file. */
+#define HAVE_MEMORY_H 1
+
+/* Define if CPU supports MMX instructions */
+#define HAVE_MMX 1
+
+/* Define to 1 if you have the <ndir.h> header file, and it defines `DIR'. */
+/* #undef HAVE_NDIR_H */
+
+/* Define if libpng is available */
+#define HAVE_PNG 1
+
+/* We always use function prototypes - not supporting old compilers */
+#define HAVE_PROTOTYPES 1
+
+/* Define to 1 if you have the <stdarg.h> header file. */
+#define HAVE_STDARG_H 1
+
+/* Define to 1 if you have the <stddef.h> header file. */
+#define HAVE_STDDEF_H 1
+
+/* Define to 1 if you have the <stdint.h> header file. */
+#define HAVE_STDINT_H 1
+
+/* Define to 1 if you have the <stdlib.h> header file. */
+#define HAVE_STDLIB_H 1
+
+/* Define to 1 if you have the <strings.h> header file. */
+#define HAVE_STRINGS_H 1
+
+/* Define to 1 if you have the <string.h> header file. */
+#define HAVE_STRING_H 1
+
+/* Define to 1 if you have the <sys/dirent.h> header file. */
+/* #undef HAVE_SYS_DIRENT_H */
+
+/* Define to 1 if you have the <sys/dir.h> header file, and it defines `DIR'.
+   */
+/* #undef HAVE_SYS_DIR_H */
+
+/* Define to 1 if you have the <sys/ndir.h> header file, and it defines `DIR'.
+   */
+/* #undef HAVE_SYS_NDIR_H */
+
+/* Define to 1 if you have the <sys/stat.h> header file. */
+#define HAVE_SYS_STAT_H 1
+
+/* Define to 1 if you have the <sys/time.h> header file. */
+#define HAVE_SYS_TIME_H 1
+
+/* Define to 1 if you have the <sys/types.h> header file. */
+#define HAVE_SYS_TYPES_H 1
+
+/* Define to 1 if you have the <sys/wait.h> header file. */
+#define HAVE_SYS_WAIT_H 1
+
+/* Define if libtiff is available */
+#define HAVE_TIFF 1
+
+/* Define to 1 if you have the <unistd.h> header file. */
+#define HAVE_UNISTD_H 1
+
+/* Define if support for XPM images is desired */
+#define HAVE_XPM 1
+
+/* Define to 1 if you have the <zlib.h> header file. */
+#define HAVE_ZLIB_H 1
+
+/* Define if locale support in X is needed */
+/* #undef I18N */
+
+/* Define to the address where bug reports for this package should be sent. */
+#define PACKAGE_BUGREPORT "as-bugs@afterstep.org"
+
+/* Define to the full name of this package. */
+#define PACKAGE_NAME "libAfterImage"
+
+/* Define to the full name and version of this package. */
+#define PACKAGE_STRING "libAfterImage 1.07"
+
+/* Define to the one symbol short name of this package. */
+#define PACKAGE_TARNAME "libAfterImage.tar"
+
+/* Define to the version of this package. */
+#define PACKAGE_VERSION "1.07"
+
+/* Support for shaped windows */
+#define SHAPE 1
+
+/* Define to 1 if you have the ANSI C header files. */
+#define STDC_HEADERS 1
+
+/* Define to 1 if you can safely include both <sys/time.h> and <time.h>. */
+#define TIME_WITH_SYS_TIME 1
+
+/* Define to 1 if your processor stores words with the most significant byte
+   first (like Motorola and SPARC, unlike Intel and VAX). */
+/* #undef WORDS_BIGENDIAN */
+
+/* Define if support for shared memory XImages is available */
+/* #undef XSHMIMAGE */
+
+/* Define to 1 if the X Window System is missing or not being used. */
+/* #undef X_DISPLAY_MISSING */
+
+/* Define to 1 if type `char' is unsigned and you are not using gcc.  */
+#ifndef __CHAR_UNSIGNED__
+/* # undef __CHAR_UNSIGNED__ */
+#endif
+
+/* Define to empty if `const' does not conform to ANSI C. */
+/* #undef const */
+
+/* Define to `__inline__' or `__inline' if that's what the C compiler
+   calls it, or to nothing if 'inline' is not supported under any name.  */
+#ifndef __cplusplus
+/* #undef inline */
+#endif
diff -Nur libAfterImage-1.07/apps/Makefile libAfterImage-1.07.new/apps/Makefile
--- libAfterImage-1.07/apps/Makefile	1970-01-01 01:00:00.000000000 +0100
+++ libAfterImage-1.07.new/apps/Makefile	2006-09-13 12:00:59.000000000 +0100
@@ -0,0 +1,224 @@
+
+PROGS= asview asscale astile asmerge asgrad asflip asi18n astext ascompose asvector
+
+
+CC		= gcc
+CCFLAGS         = -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall
+# -march=pentiumpro -mcpu=pentiumpro
+EXTRA_DEFINES	= 
+
+RANLIB		= ranlib
+AR		= ar clq
+CP		= /usr/bin/cp
+MV		= /usr/bin/mv
+RM		= /usr/bin/rm
+RMF		= /usr/bin/rm -f
+MKDIR		= /usr/bin/mkdir
+FIND		= /usr/bin/find
+XARGS		= /usr/bin/xargs
+LDCONFIG	= /sbin/ldconfig
+
+INSTALL		= /usr/bin/install -c
+INSTALL_PROGRAM	= /usr/bin/install -c -m 755
+INSTALL_DATA	= /usr/bin/install -c -m 644
+
+INCS_X		= 
+INCS_PRIVATE    = 
+INCLUDES	= $(INCS_X) $(INCS_PRIVATE)
+
+USER_LD_FLAGS	=  -rdynamic
+LIBS_X		= -lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext
+LIBS_XEXTS	=
+LIBS_AFTERIMAGE = -L../ -lAfterImage -lfreetype -lz -ltiff -lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm
+LIBRARIES	= $(USER_LD_FLAGS) $(LIBS_AFTERIMAGE) $(LIBS_X) $(LIBS_XEXTS)
+
+prefix          = /usr/local
+exec_prefix     = /usr/local
+LIBDIR		= $(DESTDIR)/usr/local/lib
+BIN_DIR		= $(DESTDIR)${exec_prefix}/bin
+MAN_DIR		= $(DESTDIR)/usr/local/man/man1
+AFTER_DIR	= @with_afterdir@
+
+# need this for dependancies :
+LIBAFTERIMAGE_PATH = ../../libAfterImage
+LIB_STATIC      = $(LIBAFTERIMAGE_PATH)/libAfterImage.a
+LIB_SHARED      = $(LIBAFTERIMAGE_PATH)/libAfterImage.so
+
+
+all:    $(PROGS)
+
+install.bin:	$(PROGS)
+		@for p in $(PROGS); do \
+	  		$(INSTALL_PROGRAM) $$p $(BIN_DIR) ; \
+		done
+
+install.man:
+		@for f in *.man; do \
+		  echo $(INSTALL_DATA) $$f $(MAN_DIR)/`basename $$f`.1x; \
+		  $(INSTALL_DATA) $$f $(MAN_DIR)/`basename $$f`.1x; \
+		done
+
+uninstall.bin:
+		$(RMF) $(AFTER_BIN_DIR)/$(PROGS)
+
+uninstall.man:
+		$(RMF) $(AFTER_MAN_DIR)/$(PROGS).1x
+
+clean:
+		$(RMF) $(PROGS) *.o *~ *% *.bak \#* core
+
+distclean:
+		$(RMF) $(PROGS) *.o *~ *% *.bak \#* *.orig core Makefile
+
+indent:
+		@SRCS=`find . -name "*.c"`; \
+		if test "x$$SRCS" == "x"; then exit; fi; \
+		for i in $$SRCS; do \
+		  if (indent -di14 -ts4 -i4 -l100 -lc80 -bad -nbbb -bli0 -c48 -cd48 -ce -cli1 -ncs -nbs -nbbo -hnl < $$i > /tmp/$$i); then \
+		    echo "indent $$i"; \
+		    mv /tmp/$$i $$i; \
+		  fi; \
+		done
+
+deps:
+		echo -n > .depend ; \
+		buf="" ; \
+		for f in `find . -name "*.h"` ; do \
+		  if test "x$$buf" != "x"; then \
+		      echo $$buf >>.depend ; \
+		      echo "" >>.depend ; \
+		  fi; \
+		  buf="$$f:"; \
+		  for d in `grep "#include \"" <$$f | awk -F \" '{print $$2}'`; do \
+		      if test "x$$buf" != "x"; then \
+		         echo $$buf \\ >>.depend ; \
+		      fi; \
+		      echo -n "		" >>.depend ; \
+		      buf="$$d "; \
+		  done; \
+		done; \
+		if test "x$$buf" != "x"; then \
+		  echo $$buf >>.depend ; \
+		  buf="" ; \
+		  echo "" >>.depend ; \
+		fi ; \
+		for file in `find . -name "*.c"` ; do \
+		  if test "x$$buf" != "x"; then \
+		      echo $$buf >>.depend ; \
+		      echo >>.depend ; \
+		  fi; \
+		  buf="."`echo $$file | awk -F . '{print $$2}'`".o:" ; \
+		  for d in `grep "#include \"" < $$file | awk -F \" '{print $$2}'`; do \
+		      if test "x$$buf" != "x"; then \
+		         echo $$buf \\ >>.depend ; \
+		      fi; \
+		      echo -n "		" >>.depend ; \
+		      buf="$$d "; \
+		  done; \
+		done; \
+		if test "x$$buf" != "x"; then \
+		  echo $$buf >>.depend ; \
+		fi
+
+asview: asview.o common.o $(LIB_STATIC)
+		$(CC) asview.o common.o $(LIBRARIES) $(EXTRA_LIBRARIES) -o asview
+
+asview_gl: asview_gl.o common.o $(LIB_STATIC)
+		$(CC) asview_gl.o common.o $(LIBRARIES) $(EXTRA_LIBRARIES) -lGL -lGLU -o asview_gl
+
+asscale: asscale.o common.o $(LIB_STATIC)
+		$(CC) asscale.o common.o $(LIBRARIES) $(EXTRA_LIBRARIES) -o asscale
+
+astile: astile.o common.o $(LIB_STATIC)
+		$(CC) astile.o common.o $(LIBRARIES) $(EXTRA_LIBRARIES) -o astile
+
+asmerge: asmerge.o common.o $(LIB_STATIC)
+		$(CC) asmerge.o common.o $(LIBRARIES) $(EXTRA_LIBRARIES) -o asmerge
+
+asgrad: asgrad.o common.o $(LIB_STATIC)
+		$(CC) asgrad.o common.o $(LIBRARIES) $(EXTRA_LIBRARIES) -o asgrad
+
+asflip: asflip.o common.o $(LIB_STATIC)
+		$(CC) asflip.o common.o $(LIBRARIES) $(EXTRA_LIBRARIES) -o asflip
+
+asi18n: asi18n.o common.o $(LIB_STATIC)
+		$(CC) asi18n.o common.o $(LIBRARIES) $(EXTRA_LIBRARIES) -o asi18n
+
+astext: astext.o common.o $(LIB_STATIC)
+		$(CC) astext.o common.o $(LIBRARIES) $(EXTRA_LIBRARIES) -o astext
+
+ascompose: ascompose.o common.o $(LIB_STATIC)
+		$(CC) ascompose.o common.o $(LIBRARIES) $(EXTRA_LIBRARIES) -o ascompose
+
+asvector: asvector.o common.o $(LIB_STATIC)
+		$(CC) asvector.o common.o $(LIBRARIES) $(EXTRA_LIBRARIES) -o asvector
+
+
+
+.c.o:
+		$(CC) $(CCFLAGS) $(EXTRA_DEFINES) $(INCLUDES) $(EXTRA_INCLUDES) -c $*.c
+
+.c.s:
+		$(CC) $(CCFLAGS) $(EXTRA_DEFINES) $(INCLUDES) $(EXTRA_INCLUDES) -S $*.c
+
+.lo:	$*.c
+
+
+install:	install.bin
+
+uninstall:	uninstall.bin
+
+include .depend
+
+
+LIBAFTERIMAGE_OBJS = \
+		$(LIBAFTERIMAGE_PATH)/asimage.c \
+		$(LIBAFTERIMAGE_PATH)/ascmap.c \
+		$(LIBAFTERIMAGE_PATH)/asfont.c \
+		$(LIBAFTERIMAGE_PATH)/asimagexml.c \
+		$(LIBAFTERIMAGE_PATH)/asstorage.c \
+		$(LIBAFTERIMAGE_PATH)/asvisual.c \
+		$(LIBAFTERIMAGE_PATH)/blender.c \
+		$(LIBAFTERIMAGE_PATH)/bmp.c \
+		$(LIBAFTERIMAGE_PATH)/char2uni.c \
+		$(LIBAFTERIMAGE_PATH)/draw.c \
+		$(LIBAFTERIMAGE_PATH)/export.c \
+		$(LIBAFTERIMAGE_PATH)/imencdec.c \
+		$(LIBAFTERIMAGE_PATH)/import.c \
+		$(LIBAFTERIMAGE_PATH)/pixmap.c \
+		$(LIBAFTERIMAGE_PATH)/transform.c \
+		$(LIBAFTERIMAGE_PATH)/ungif.c \
+		$(LIBAFTERIMAGE_PATH)/xcf.c \
+		$(LIBAFTERIMAGE_PATH)/ximage.c \
+		$(LIBAFTERIMAGE_PATH)/xpm.c
+
+LIBAFTERIMAGE_INCS = \
+		$(LIBAFTERIMAGE_PATH)/afterimage.h \
+		$(LIBAFTERIMAGE_PATH)/config.h \
+		$(LIBAFTERIMAGE_PATH)/afterbase.h \
+		$(LIBAFTERIMAGE_PATH)/ascmap.h \
+		$(LIBAFTERIMAGE_PATH)/asfont.h \
+		$(LIBAFTERIMAGE_PATH)/asim_afterbase.h \
+		$(LIBAFTERIMAGE_PATH)/asimage.h \
+		$(LIBAFTERIMAGE_PATH)/asimagexml.h \
+		$(LIBAFTERIMAGE_PATH)/asstorage.h \
+		$(LIBAFTERIMAGE_PATH)/asvisual.h \
+		$(LIBAFTERIMAGE_PATH)/blender.h \
+		$(LIBAFTERIMAGE_PATH)/bmp.h \
+		$(LIBAFTERIMAGE_PATH)/char2uni.h \
+		$(LIBAFTERIMAGE_PATH)/draw.h \
+		$(LIBAFTERIMAGE_PATH)/export.h \
+		$(LIBAFTERIMAGE_PATH)/imencdec.h \
+		$(LIBAFTERIMAGE_PATH)/import.h \
+		$(LIBAFTERIMAGE_PATH)/pixmap.h \
+		$(LIBAFTERIMAGE_PATH)/transform.h \
+		$(LIBAFTERIMAGE_PATH)/ungif.h \
+		$(LIBAFTERIMAGE_PATH)/xcf.h \
+		$(LIBAFTERIMAGE_PATH)/ximage.h \
+		$(LIBAFTERIMAGE_PATH)/xpm.h
+
+$(LIBAFTERIMAGE_PATH)/libAfterImage.a: $(LIBAFTERIMAGE_OBJS) $(LIBAFTERIMAGE_INCS)
+		cd $(LIBAFTERIMAGE_PATH)/; ${MAKE} libAfterImage.a
+
+$(LIBAFTERIMAGE_PATH)/libAfterImage.so: $(LIBAFTERIMAGE_OBJS) $(LIBAFTERIMAGE_INCS)
+		cd $(LIBAFTERIMAGE_PATH)/; ${MAKE} libAfterImage.so
diff -Nur libAfterImage-1.07/apps/Makefile.in libAfterImage-1.07.new/apps/Makefile.in
--- libAfterImage-1.07/apps/Makefile.in	2005-02-28 14:52:47.000000000 +0000
+++ libAfterImage-1.07.new/apps/Makefile.in	2006-09-13 13:17:20.000000000 +0100
@@ -40,7 +40,7 @@
 AFTER_DIR	= @with_afterdir@
 
 # need this for dependancies :
-LIBAFTERIMAGE_PATH = ../../libAfterImage
+LIBAFTERIMAGE_PATH = ../
 LIB_STATIC      = $(LIBAFTERIMAGE_PATH)/libAfterImage.a
 LIB_SHARED      = $(LIBAFTERIMAGE_PATH)/libAfterImage.so
 
diff -Nur libAfterImage-1.07/config.h libAfterImage-1.07.new/config.h
--- libAfterImage-1.07/config.h	1970-01-01 01:00:00.000000000 +0100
+++ libAfterImage-1.07.new/config.h	2006-09-13 12:00:59.000000000 +0100
@@ -0,0 +1,177 @@
+/* config.h.  Generated by configure.  */
+/* config.h.in.  Generated from configure.in by autoheader.  */
+
+/* Define if memory allocation logging and debugging is desired */
+/* #undef DEBUG_ALLOCS */
+
+/* Define if libAfterBase is available */
+/* #undef HAVE_AFTERBASE */
+
+/* Define if using builtin libjpeg */
+/* #undef HAVE_BUILTIN_JPEG */
+
+/* Define if using builtin libpng */
+/* #undef HAVE_BUILTIN_PNG */
+
+/* Define if using builtin libungif */
+#define HAVE_BUILTIN_UNGIF 1
+
+/* Define to 1 if you have the <dirent.h> header file, and it defines `DIR'.
+   */
+#define HAVE_DIRENT_H 1
+
+/* Define to 1 if you have the <errno.h> header file. */
+#define HAVE_ERRNO_H 1
+
+/* Define if libFreeType is available */
+#define HAVE_FREETYPE 1
+
+/* Define if libFreeType has freetype.h in freetype/ */
+#define HAVE_FREETYPE_FREETYPE 1
+
+/* Define to 1 if you have the <ft2build.h> header file. */
+#define HAVE_FT2BUILD_H 1
+
+/* Define if libgif/ungif is available */
+#define HAVE_GIF 1
+
+/* Support for OpenGL extention */
+#define HAVE_GLX 1
+
+/* Define to 1 if you have the <inttypes.h> header file. */
+#define HAVE_INTTYPES_H 1
+
+/* Define if libjpeg is available */
+#define HAVE_JPEG 1
+
+/* Define if support for XPM images should be through libXpm */
+/* #undef HAVE_LIBXPM */
+
+/* Define if support for XPM images should be through libXpm library in Xlib
+   */
+/* #undef HAVE_LIBXPM_X11 */
+
+/* Define to 1 if the system has the type `long long'. */
+#define HAVE_LONG_LONG 1
+
+/* Define to 1 if you have the <malloc.h> header file. */
+#define HAVE_MALLOC_H 1
+
+/* Define to 1 if you have the <memory.h> header file. */
+#define HAVE_MEMORY_H 1
+
+/* Define if CPU supports MMX instructions */
+#define HAVE_MMX 1
+
+/* Define to 1 if you have the <ndir.h> header file, and it defines `DIR'. */
+/* #undef HAVE_NDIR_H */
+
+/* Define if libpng is available */
+#define HAVE_PNG 1
+
+/* We always use function prototypes - not supporting old compilers */
+#define HAVE_PROTOTYPES 1
+
+/* Define to 1 if you have the <stdarg.h> header file. */
+#define HAVE_STDARG_H 1
+
+/* Define to 1 if you have the <stddef.h> header file. */
+#define HAVE_STDDEF_H 1
+
+/* Define to 1 if you have the <stdint.h> header file. */
+#define HAVE_STDINT_H 1
+
+/* Define to 1 if you have the <stdlib.h> header file. */
+#define HAVE_STDLIB_H 1
+
+/* Define to 1 if you have the <strings.h> header file. */
+#define HAVE_STRINGS_H 1
+
+/* Define to 1 if you have the <string.h> header file. */
+#define HAVE_STRING_H 1
+
+/* Define to 1 if you have the <sys/dirent.h> header file. */
+/* #undef HAVE_SYS_DIRENT_H */
+
+/* Define to 1 if you have the <sys/dir.h> header file, and it defines `DIR'.
+   */
+/* #undef HAVE_SYS_DIR_H */
+
+/* Define to 1 if you have the <sys/ndir.h> header file, and it defines `DIR'.
+   */
+/* #undef HAVE_SYS_NDIR_H */
+
+/* Define to 1 if you have the <sys/stat.h> header file. */
+#define HAVE_SYS_STAT_H 1
+
+/* Define to 1 if you have the <sys/time.h> header file. */
+#define HAVE_SYS_TIME_H 1
+
+/* Define to 1 if you have the <sys/types.h> header file. */
+#define HAVE_SYS_TYPES_H 1
+
+/* Define to 1 if you have the <sys/wait.h> header file. */
+#define HAVE_SYS_WAIT_H 1
+
+/* Define if libtiff is available */
+#define HAVE_TIFF 1
+
+/* Define to 1 if you have the <unistd.h> header file. */
+#define HAVE_UNISTD_H 1
+
+/* Define if support for XPM images is desired */
+#define HAVE_XPM 1
+
+/* Define to 1 if you have the <zlib.h> header file. */
+#define HAVE_ZLIB_H 1
+
+/* Define if locale support in X is needed */
+/* #undef I18N */
+
+/* Define to the address where bug reports for this package should be sent. */
+#define PACKAGE_BUGREPORT "as-bugs@afterstep.org"
+
+/* Define to the full name of this package. */
+#define PACKAGE_NAME "libAfterImage"
+
+/* Define to the full name and version of this package. */
+#define PACKAGE_STRING "libAfterImage 1.07"
+
+/* Define to the one symbol short name of this package. */
+#define PACKAGE_TARNAME "libAfterImage.tar"
+
+/* Define to the version of this package. */
+#define PACKAGE_VERSION "1.07"
+
+/* Support for shaped windows */
+#define SHAPE 1
+
+/* Define to 1 if you have the ANSI C header files. */
+#define STDC_HEADERS 1
+
+/* Define to 1 if you can safely include both <sys/time.h> and <time.h>. */
+#define TIME_WITH_SYS_TIME 1
+
+/* Define to 1 if your processor stores words with the most significant byte
+   first (like Motorola and SPARC, unlike Intel and VAX). */
+/* #undef WORDS_BIGENDIAN */
+
+/* Define if support for shared memory XImages is available */
+/* #undef XSHMIMAGE */
+
+/* Define to 1 if the X Window System is missing or not being used. */
+/* #undef X_DISPLAY_MISSING */
+
+/* Define to 1 if type `char' is unsigned and you are not using gcc.  */
+#ifndef __CHAR_UNSIGNED__
+/* # undef __CHAR_UNSIGNED__ */
+#endif
+
+/* Define to empty if `const' does not conform to ANSI C. */
+/* #undef const */
+
+/* Define to `__inline__' or `__inline' if that's what the C compiler
+   calls it, or to nothing if 'inline' is not supported under any name.  */
+#ifndef __cplusplus
+/* #undef inline */
+#endif
diff -Nur libAfterImage-1.07/config.log libAfterImage-1.07.new/config.log
--- libAfterImage-1.07/config.log	1970-01-01 01:00:00.000000000 +0100
+++ libAfterImage-1.07.new/config.log	2006-09-13 12:01:00.000000000 +0100
@@ -0,0 +1,1234 @@
+This file contains any messages produced by compilers while
+running configure, to aid debugging if configure makes a mistake.
+
+It was created by libAfterImage configure 1.07, which was
+generated by GNU Autoconf 2.59.  Invocation command line was
+
+  $ ./configure --enable-glx
+
+## --------- ##
+## Platform. ##
+## --------- ##
+
+hostname = mango
+uname -m = x86_64
+uname -r = 2.6.17-gentoo-r7
+uname -s = Linux
+uname -v = #1 PREEMPT Mon Sep 4 19:29:55 WEST 2006
+
+/usr/bin/uname -p = AMD Athlon(tm) 64 Processor 3500+
+/bin/uname -X     = unknown
+
+/bin/arch              = x86_64
+/usr/bin/arch -k       = unknown
+/usr/convex/getsysinfo = unknown
+hostinfo               = unknown
+/bin/machine           = unknown
+/usr/bin/oslevel       = unknown
+/bin/universe          = unknown
+
+PATH: .
+PATH: /home/seb/bin
+PATH: /usr/kde/3.5/bin
+PATH: /usr/local/bin
+PATH: /usr/bin
+PATH: /bin
+PATH: /opt/bin
+PATH: /usr/x86_64-pc-linux-gnu/gcc-bin/4.1.1
+PATH: /opt/blackdown-jdk-1.4.2.03/bin
+PATH: /opt/blackdown-jdk-1.4.2.03/jre/bin
+PATH: /usr/kde/3.5/bin
+PATH: /usr/qt/3/bin
+
+
+## ----------- ##
+## Core tests. ##
+## ----------- ##
+
+configure:1631: checking for gcc
+configure:1647: found /usr/bin/gcc
+configure:1657: result: gcc
+configure:1901: checking for C compiler version
+configure:1904: gcc --version </dev/null >&5
+gcc (GCC) 4.1.1 (Gentoo 4.1.1)
+Copyright (C) 2006 Free Software Foundation, Inc.
+This is free software; see the source for copying conditions.  There is NO
+warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
+
+configure:1907: $? = 0
+configure:1909: gcc -v </dev/null >&5
+Using built-in specs.
+Target: x86_64-pc-linux-gnu
+Configured with: /var/tmp/portage/gcc-4.1.1/work/gcc-4.1.1/configure --prefix=/usr --bindir=/usr/x86_64-pc-linux-gnu/gcc-bin/4.1.1 --includedir=/usr/lib/gcc/x86_64-pc-linux-gnu/4.1.1/include --datadir=/usr/share/gcc-data/x86_64-pc-linux-gnu/4.1.1 --mandir=/usr/share/gcc-data/x86_64-pc-linux-gnu/4.1.1/man --infodir=/usr/share/gcc-data/x86_64-pc-linux-gnu/4.1.1/info --with-gxx-include-dir=/usr/lib/gcc/x86_64-pc-linux-gnu/4.1.1/include/g++-v4 --host=x86_64-pc-linux-gnu --build=x86_64-pc-linux-gnu --disable-altivec --enable-nls --without-included-gettext --with-system-zlib --disable-checking --disable-werror --disable-libunwind-exceptions --enable-multilib --disable-libmudflap --disable-libssp --enable-languages=c,c++,java,objc,fortran --enable-shared --enable-threads=posix --enable-__cxa_atexit --enable-clocale=gnu
+Thread model: posix
+gcc version 4.1.1 (Gentoo 4.1.1)
+configure:1912: $? = 0
+configure:1914: gcc -V </dev/null >&5
+gcc: '-V' option must have argument
+configure:1917: $? = 1
+configure:1940: checking for C compiler default output file name
+configure:1943: gcc    conftest.c  >&5
+configure:1946: $? = 0
+configure:1992: result: a.out
+configure:1997: checking whether the C compiler works
+configure:2003: ./a.out
+configure:2006: $? = 0
+configure:2023: result: yes
+configure:2030: checking whether we are cross compiling
+configure:2032: result: no
+configure:2035: checking for suffix of executables
+configure:2037: gcc -o conftest    conftest.c  >&5
+configure:2040: $? = 0
+configure:2065: result: 
+configure:2071: checking for suffix of object files
+configure:2092: gcc -c   conftest.c >&5
+configure:2095: $? = 0
+configure:2117: result: o
+configure:2121: checking whether we are using the GNU C compiler
+configure:2145: gcc -c   conftest.c >&5
+configure:2151: $? = 0
+configure:2155: test -z 
+			 || test ! -s conftest.err
+configure:2158: $? = 0
+configure:2161: test -s conftest.o
+configure:2164: $? = 0
+configure:2177: result: yes
+configure:2183: checking whether gcc accepts -g
+configure:2204: gcc -c -g  conftest.c >&5
+configure:2210: $? = 0
+configure:2214: test -z 
+			 || test ! -s conftest.err
+configure:2217: $? = 0
+configure:2220: test -s conftest.o
+configure:2223: $? = 0
+configure:2234: result: yes
+configure:2251: checking for gcc option to accept ANSI C
+configure:2321: gcc  -c -g -O2  conftest.c >&5
+configure:2327: $? = 0
+configure:2331: test -z 
+			 || test ! -s conftest.err
+configure:2334: $? = 0
+configure:2337: test -s conftest.o
+configure:2340: $? = 0
+configure:2358: result: none needed
+configure:2376: gcc -c -g -O2  conftest.c >&5
+conftest.c:2: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'me'
+configure:2382: $? = 1
+configure: failed program was:
+| #ifndef __cplusplus
+|   choke me
+| #endif
+configure:2515: checking whether ln -s works
+configure:2519: result: yes
+configure:2558: checking build system type
+configure:2576: result: x86_64-unknown-linux-gnu
+configure:2584: checking host system type
+configure:2598: result: x86_64-unknown-linux-gnu
+configure:2693: checking for a BSD-compatible install
+configure:2748: result: /usr/bin/install -c
+configure:2806: checking for ranlib
+configure:2822: found /usr/bin/ranlib
+configure:2833: result: ranlib
+configure:2847: checking for rm
+configure:2865: found /usr/bin/rm
+configure:2878: result: /usr/bin/rm
+configure:2887: checking for mv
+configure:2905: found /usr/bin/mv
+configure:2918: result: /usr/bin/mv
+configure:2927: checking for cp
+configure:2945: found /usr/bin/cp
+configure:2958: result: /usr/bin/cp
+configure:2967: checking for mkdir
+configure:2985: found /usr/bin/mkdir
+configure:2998: result: /usr/bin/mkdir
+configure:3007: checking for perl
+configure:3025: found /usr/bin/perl
+configure:3038: result: /usr/bin/perl
+configure:3047: checking for find
+configure:3065: found /usr/bin/find
+configure:3078: result: /usr/bin/find
+configure:3087: checking for xargs
+configure:3105: found /usr/bin/xargs
+configure:3118: result: /usr/bin/xargs
+configure:3127: checking for ldconfig
+configure:3146: found /sbin/ldconfig
+configure:3159: result: /sbin/ldconfig
+configure:3180: checking for MMX support
+configure:3213: gcc -o conftest -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall   -rdynamic conftest.c  >&5
+configure:3216: $? = 0
+configure:3218: ./conftest
+configure:3221: $? = 0
+configure:3227: result: yes
+configure:3252: checking how to run the C preprocessor
+configure:3287: gcc -E  conftest.c
+configure:3293: $? = 0
+configure:3325: gcc -E  conftest.c
+conftest.c:10:28: error: ac_nonexistent.h: No such file or directory
+configure:3331: $? = 1
+configure: failed program was:
+| /* confdefs.h.  */
+| 
+| #define PACKAGE_NAME "libAfterImage"
+| #define PACKAGE_TARNAME "libAfterImage.tar"
+| #define PACKAGE_VERSION "1.07"
+| #define PACKAGE_STRING "libAfterImage 1.07"
+| #define PACKAGE_BUGREPORT "as-bugs@afterstep.org"
+| #define HAVE_MMX 1
+| /* end confdefs.h.  */
+| #include <ac_nonexistent.h>
+configure:3370: result: gcc -E
+configure:3394: gcc -E  conftest.c
+configure:3400: $? = 0
+configure:3432: gcc -E  conftest.c
+conftest.c:10:28: error: ac_nonexistent.h: No such file or directory
+configure:3438: $? = 1
+configure: failed program was:
+| /* confdefs.h.  */
+| 
+| #define PACKAGE_NAME "libAfterImage"
+| #define PACKAGE_TARNAME "libAfterImage.tar"
+| #define PACKAGE_VERSION "1.07"
+| #define PACKAGE_STRING "libAfterImage 1.07"
+| #define PACKAGE_BUGREPORT "as-bugs@afterstep.org"
+| #define HAVE_MMX 1
+| /* end confdefs.h.  */
+| #include <ac_nonexistent.h>
+configure:3482: checking for X
+configure:3587: gcc -E  conftest.c
+configure:3593: $? = 0
+configure:3712: result: libraries /usr/lib64, headers 
+configure:3884: gcc -o conftest -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall   -rdynamic conftest.c   -L/usr/lib64 -lX11 >&5
+configure:3890: $? = 0
+configure:3894: test -z 
+			 || test ! -s conftest.err
+configure:3897: $? = 0
+configure:3900: test -s conftest
+configure:3903: $? = 0
+configure:4061: checking for gethostbyname
+configure:4118: gcc -o conftest -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall   -rdynamic conftest.c  >&5
+configure:4124: $? = 0
+configure:4128: test -z 
+			 || test ! -s conftest.err
+configure:4131: $? = 0
+configure:4134: test -s conftest
+configure:4137: $? = 0
+configure:4149: result: yes
+configure:4300: checking for connect
+configure:4357: gcc -o conftest -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall   -rdynamic conftest.c  >&5
+configure:4363: $? = 0
+configure:4367: test -z 
+			 || test ! -s conftest.err
+configure:4370: $? = 0
+configure:4373: test -s conftest
+configure:4376: $? = 0
+configure:4388: result: yes
+configure:4463: checking for remove
+configure:4520: gcc -o conftest -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall   -rdynamic conftest.c  >&5
+configure:4526: $? = 0
+configure:4530: test -z 
+			 || test ! -s conftest.err
+configure:4533: $? = 0
+configure:4536: test -s conftest
+configure:4539: $? = 0
+configure:4551: result: yes
+configure:4626: checking for shmat
+configure:4683: gcc -o conftest -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall   -rdynamic conftest.c  >&5
+configure:4689: $? = 0
+configure:4693: test -z 
+			 || test ! -s conftest.err
+configure:4696: $? = 0
+configure:4699: test -s conftest
+configure:4702: $? = 0
+configure:4714: result: yes
+configure:4798: checking for IceConnectionNumber in -lICE
+configure:4828: gcc -o conftest -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall   -rdynamic -L/usr/lib64 conftest.c -lICE   >&5
+configure:4834: $? = 0
+configure:4838: test -z 
+			 || test ! -s conftest.err
+configure:4841: $? = 0
+configure:4844: test -s conftest
+configure:4847: $? = 0
+configure:4860: result: yes
+configure:4888: checking for XOpenDisplay in -lX11
+configure:4918: gcc -o conftest -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall   -rdynamic conftest.c -lX11  -rdynamic  -L/usr/lib64   -lSM -lICE  >&5
+configure:4924: $? = 0
+configure:4928: test -z 
+			 || test ! -s conftest.err
+configure:4931: $? = 0
+configure:4934: test -s conftest
+configure:4937: $? = 0
+configure:4950: result: yes
+configure:4960: checking whether byte ordering is bigendian
+configure:4987: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:4993: $? = 0
+configure:4997: test -z 
+			 || test ! -s conftest.err
+configure:5000: $? = 0
+configure:5003: test -s conftest.o
+configure:5006: $? = 0
+configure:5030: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+conftest.c: In function 'main':
+conftest.c:17: error: 'not' undeclared (first use in this function)
+conftest.c:17: error: (Each undeclared identifier is reported only once
+conftest.c:17: error: for each function it appears in.)
+conftest.c:17: error: expected ';' before 'big'
+configure:5036: $? = 1
+configure: failed program was:
+| /* confdefs.h.  */
+| 
+| #define PACKAGE_NAME "libAfterImage"
+| #define PACKAGE_TARNAME "libAfterImage.tar"
+| #define PACKAGE_VERSION "1.07"
+| #define PACKAGE_STRING "libAfterImage 1.07"
+| #define PACKAGE_BUGREPORT "as-bugs@afterstep.org"
+| #define HAVE_MMX 1
+| /* end confdefs.h.  */
+| #include <sys/types.h>
+| #include <sys/param.h>
+| 
+| int
+| main ()
+| {
+| #if BYTE_ORDER != BIG_ENDIAN
+|  not big endian
+| #endif
+| 
+|   ;
+|   return 0;
+| }
+configure:5171: result: no
+configure:5190: checking for inline
+configure:5211: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5217: $? = 0
+configure:5221: test -z 
+			 || test ! -s conftest.err
+configure:5224: $? = 0
+configure:5227: test -s conftest.o
+configure:5230: $? = 0
+configure:5242: result: inline
+configure:5261: checking for egrep
+configure:5271: result: grep -E
+configure:5276: checking for ANSI C header files
+configure:5301: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5307: $? = 0
+configure:5311: test -z 
+			 || test ! -s conftest.err
+configure:5314: $? = 0
+configure:5317: test -s conftest.o
+configure:5320: $? = 0
+configure:5409: gcc -o conftest -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall   -rdynamic conftest.c  >&5
+conftest.c: In function 'main':
+conftest.c:27: warning: implicit declaration of function 'exit'
+conftest.c:27: warning: incompatible implicit declaration of built-in function 'exit'
+configure:5412: $? = 0
+configure:5414: ./conftest
+configure:5417: $? = 0
+configure:5432: result: yes
+configure:5456: checking for sys/types.h
+configure:5472: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5478: $? = 0
+configure:5482: test -z 
+			 || test ! -s conftest.err
+configure:5485: $? = 0
+configure:5488: test -s conftest.o
+configure:5491: $? = 0
+configure:5502: result: yes
+configure:5456: checking for sys/stat.h
+configure:5472: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5478: $? = 0
+configure:5482: test -z 
+			 || test ! -s conftest.err
+configure:5485: $? = 0
+configure:5488: test -s conftest.o
+configure:5491: $? = 0
+configure:5502: result: yes
+configure:5456: checking for stdlib.h
+configure:5472: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5478: $? = 0
+configure:5482: test -z 
+			 || test ! -s conftest.err
+configure:5485: $? = 0
+configure:5488: test -s conftest.o
+configure:5491: $? = 0
+configure:5502: result: yes
+configure:5456: checking for string.h
+configure:5472: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5478: $? = 0
+configure:5482: test -z 
+			 || test ! -s conftest.err
+configure:5485: $? = 0
+configure:5488: test -s conftest.o
+configure:5491: $? = 0
+configure:5502: result: yes
+configure:5456: checking for memory.h
+configure:5472: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5478: $? = 0
+configure:5482: test -z 
+			 || test ! -s conftest.err
+configure:5485: $? = 0
+configure:5488: test -s conftest.o
+configure:5491: $? = 0
+configure:5502: result: yes
+configure:5456: checking for strings.h
+configure:5472: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5478: $? = 0
+configure:5482: test -z 
+			 || test ! -s conftest.err
+configure:5485: $? = 0
+configure:5488: test -s conftest.o
+configure:5491: $? = 0
+configure:5502: result: yes
+configure:5456: checking for inttypes.h
+configure:5472: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5478: $? = 0
+configure:5482: test -z 
+			 || test ! -s conftest.err
+configure:5485: $? = 0
+configure:5488: test -s conftest.o
+configure:5491: $? = 0
+configure:5502: result: yes
+configure:5456: checking for stdint.h
+configure:5472: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5478: $? = 0
+configure:5482: test -z 
+			 || test ! -s conftest.err
+configure:5485: $? = 0
+configure:5488: test -s conftest.o
+configure:5491: $? = 0
+configure:5502: result: yes
+configure:5456: checking for unistd.h
+configure:5472: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5478: $? = 0
+configure:5482: test -z 
+			 || test ! -s conftest.err
+configure:5485: $? = 0
+configure:5488: test -s conftest.o
+configure:5491: $? = 0
+configure:5502: result: yes
+configure:5514: checking for long long
+configure:5538: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5544: $? = 0
+configure:5548: test -z 
+			 || test ! -s conftest.err
+configure:5551: $? = 0
+configure:5554: test -s conftest.o
+configure:5557: $? = 0
+configure:5568: result: yes
+configure:5580: checking whether time.h and sys/time.h may both be included
+configure:5605: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5611: $? = 0
+configure:5615: test -z 
+			 || test ! -s conftest.err
+configure:5618: $? = 0
+configure:5621: test -s conftest.o
+configure:5624: $? = 0
+configure:5635: result: yes
+configure:5666: checking sys/wait.h usability
+configure:5678: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5684: $? = 0
+configure:5688: test -z 
+			 || test ! -s conftest.err
+configure:5691: $? = 0
+configure:5694: test -s conftest.o
+configure:5697: $? = 0
+configure:5707: result: yes
+configure:5711: checking sys/wait.h presence
+configure:5721: gcc -E  conftest.c
+configure:5727: $? = 0
+configure:5747: result: yes
+configure:5782: checking for sys/wait.h
+configure:5789: result: yes
+configure:5666: checking sys/time.h usability
+configure:5678: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5684: $? = 0
+configure:5688: test -z 
+			 || test ! -s conftest.err
+configure:5691: $? = 0
+configure:5694: test -s conftest.o
+configure:5697: $? = 0
+configure:5707: result: yes
+configure:5711: checking sys/time.h presence
+configure:5721: gcc -E  conftest.c
+configure:5727: $? = 0
+configure:5747: result: yes
+configure:5782: checking for sys/time.h
+configure:5789: result: yes
+configure:5666: checking malloc.h usability
+configure:5678: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5684: $? = 0
+configure:5688: test -z 
+			 || test ! -s conftest.err
+configure:5691: $? = 0
+configure:5694: test -s conftest.o
+configure:5697: $? = 0
+configure:5707: result: yes
+configure:5711: checking malloc.h presence
+configure:5721: gcc -E  conftest.c
+configure:5727: $? = 0
+configure:5747: result: yes
+configure:5782: checking for malloc.h
+configure:5789: result: yes
+configure:5657: checking for stdlib.h
+configure:5662: result: yes
+configure:5657: checking for unistd.h
+configure:5662: result: yes
+configure:5666: checking stddef.h usability
+configure:5678: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5684: $? = 0
+configure:5688: test -z 
+			 || test ! -s conftest.err
+configure:5691: $? = 0
+configure:5694: test -s conftest.o
+configure:5697: $? = 0
+configure:5707: result: yes
+configure:5711: checking stddef.h presence
+configure:5721: gcc -E  conftest.c
+configure:5727: $? = 0
+configure:5747: result: yes
+configure:5782: checking for stddef.h
+configure:5789: result: yes
+configure:5666: checking stdarg.h usability
+configure:5678: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5684: $? = 0
+configure:5688: test -z 
+			 || test ! -s conftest.err
+configure:5691: $? = 0
+configure:5694: test -s conftest.o
+configure:5697: $? = 0
+configure:5707: result: yes
+configure:5711: checking stdarg.h presence
+configure:5721: gcc -E  conftest.c
+configure:5727: $? = 0
+configure:5747: result: yes
+configure:5782: checking for stdarg.h
+configure:5789: result: yes
+configure:5666: checking errno.h usability
+configure:5678: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:5684: $? = 0
+configure:5688: test -z 
+			 || test ! -s conftest.err
+configure:5691: $? = 0
+configure:5694: test -s conftest.o
+configure:5697: $? = 0
+configure:5707: result: yes
+configure:5711: checking errno.h presence
+configure:5721: gcc -E  conftest.c
+configure:5727: $? = 0
+configure:5747: result: yes
+configure:5782: checking for errno.h
+configure:5789: result: yes
+configure:6178: checking for XShapeCombineMask in -lXext
+configure:6208: gcc -o conftest -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall   -rdynamic conftest.c -lXext  -rdynamic  -L/usr/lib64   -lSM -lICE  >&5
+configure:6214: $? = 0
+configure:6218: test -z 
+			 || test ! -s conftest.err
+configure:6221: $? = 0
+configure:6224: test -s conftest
+configure:6227: $? = 0
+configure:6240: result: yes
+configure:6253: checking for glDrawPixels in -lGL
+configure:6283: gcc -o conftest -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall   -rdynamic conftest.c -lGL  -rdynamic  -L/usr/lib64   -lSM -lICE  >&5
+configure:6289: $? = 0
+configure:6293: test -z 
+			 || test ! -s conftest.err
+configure:6296: $? = 0
+configure:6299: test -s conftest
+configure:6302: $? = 0
+configure:6315: result: yes
+configure:6690: checking jpeglib.h usability
+configure:6702: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:6708: $? = 0
+configure:6712: test -z 
+			 || test ! -s conftest.err
+configure:6715: $? = 0
+configure:6718: test -s conftest.o
+configure:6721: $? = 0
+configure:6731: result: yes
+configure:6735: checking jpeglib.h presence
+configure:6745: gcc -E  conftest.c
+configure:6751: $? = 0
+configure:6771: result: yes
+configure:6806: checking for jpeglib.h
+configure:6813: result: yes
+configure:6860: checking for unsigned char
+configure:6884: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:6890: $? = 0
+configure:6894: test -z 
+			 || test ! -s conftest.err
+configure:6897: $? = 0
+configure:6900: test -s conftest.o
+configure:6903: $? = 0
+configure:6914: result: yes
+configure:6917: checking for unsigned short
+configure:6941: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:6947: $? = 0
+configure:6951: test -z 
+			 || test ! -s conftest.err
+configure:6954: $? = 0
+configure:6957: test -s conftest.o
+configure:6960: $? = 0
+configure:6971: result: yes
+configure:6974: checking for an ANSI C-conforming const
+configure:7041: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+conftest.c: In function 'main':
+conftest.c:62: warning: unused variable 's'
+conftest.c:82: warning: unused variable 'foo'
+conftest.c:49: warning: unused variable 'zero'
+conftest.c:43: warning: unused variable 'x'
+conftest.c:64: warning: 't' is used uninitialized in this function
+conftest.c:79: warning: 'b' is used uninitialized in this function
+configure:7047: $? = 0
+configure:7051: test -z 
+			 || test ! -s conftest.err
+configure:7054: $? = 0
+configure:7057: test -s conftest.o
+configure:7060: $? = 0
+configure:7071: result: yes
+configure:7082: checking whether char is unsigned
+configure:7105: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:7111: $? = 0
+configure:7115: test -z 
+			 || test ! -s conftest.err
+configure:7118: $? = 0
+configure:7121: test -s conftest.o
+configure:7124: $? = 0
+configure:7135: result: no
+configure:7159: checking zlib.h usability
+configure:7171: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:7177: $? = 0
+configure:7181: test -z 
+			 || test ! -s conftest.err
+configure:7184: $? = 0
+configure:7187: test -s conftest.o
+configure:7190: $? = 0
+configure:7200: result: yes
+configure:7204: checking zlib.h presence
+configure:7214: gcc -E  conftest.c
+configure:7220: $? = 0
+configure:7240: result: yes
+configure:7275: checking for zlib.h
+configure:7282: result: yes
+configure:7317: checking png.h usability
+configure:7329: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:7335: $? = 0
+configure:7339: test -z 
+			 || test ! -s conftest.err
+configure:7342: $? = 0
+configure:7345: test -s conftest.o
+configure:7348: $? = 0
+configure:7358: result: yes
+configure:7362: checking png.h presence
+configure:7372: gcc -E  conftest.c
+configure:7378: $? = 0
+configure:7398: result: yes
+configure:7433: checking for png.h
+configure:7440: result: yes
+configure:7450: checking for png_get_sRGB in png.h
+configure:7469: result: yes
+configure:7688: checking using built-in UNGIF library
+configure:7702: result: yes
+configure:7733: checking tiffio.h usability
+configure:7745: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:7751: $? = 0
+configure:7755: test -z 
+			 || test ! -s conftest.err
+configure:7758: $? = 0
+configure:7761: test -s conftest.o
+configure:7764: $? = 0
+configure:7774: result: yes
+configure:7778: checking tiffio.h presence
+configure:7788: gcc -E  conftest.c
+configure:7794: $? = 0
+configure:7814: result: yes
+configure:7849: checking for tiffio.h
+configure:7856: result: yes
+configure:7888: checking headers required by TTF support
+configure:7906: result:  -I/usr/include/freetype2
+configure:7927: checking ft2build.h usability
+configure:7939: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  -I/usr/include/freetype2        -I/usr/include/freetype2  conftest.c >&5
+configure:7945: $? = 0
+configure:7949: test -z 
+			 || test ! -s conftest.err
+configure:7952: $? = 0
+configure:7955: test -s conftest.o
+configure:7958: $? = 0
+configure:7968: result: yes
+configure:7972: checking ft2build.h presence
+configure:7982: gcc -E  -I/usr/include/freetype2  conftest.c
+configure:7988: $? = 0
+configure:8008: result: yes
+configure:8043: checking for ft2build.h
+configure:8050: result: yes
+configure:8063: checking freetype/freetype.h 
+In file included from conftest.c:41:
+/usr/include/freetype2/freetype/freetype.h:20:2: error: #error "`ft2build.h' hasn't been included yet!"
+/usr/include/freetype2/freetype/freetype.h:21:2: error: #error "Please always use macros to include FreeType header files."
+/usr/include/freetype2/freetype/freetype.h:22:2: error: #error "Example:"
+/usr/include/freetype2/freetype/freetype.h:23:2: error: #error "  #include <ft2build.h>"
+/usr/include/freetype2/freetype/freetype.h:24:2: error: #error "  #include FT_FREETYPE_H"
+configure:8207: gcc -o conftest -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  -I/usr/include/freetype2        -I/usr/include/freetype2   -rdynamic conftest.c  >&5
+conftest.c: In function 'main':
+conftest.c:43: warning: unused variable 'f'
+configure:8210: $? = 0
+configure:8212: ./conftest
+configure:8215: $? = 0
+configure:8284: result: yes
+configure:8321: checking libAfterBase headers
+configure:8339: checking libAfterBase/astypes.h usability
+configure:8351: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+conftest.c:77:34: error: libAfterBase/astypes.h: No such file or directory
+configure:8357: $? = 1
+configure: failed program was:
+| /* confdefs.h.  */
+| 
+| #define PACKAGE_NAME "libAfterImage"
+| #define PACKAGE_TARNAME "libAfterImage.tar"
+| #define PACKAGE_VERSION "1.07"
+| #define PACKAGE_STRING "libAfterImage 1.07"
+| #define PACKAGE_BUGREPORT "as-bugs@afterstep.org"
+| #define HAVE_MMX 1
+| #define STDC_HEADERS 1
+| #define HAVE_SYS_TYPES_H 1
+| #define HAVE_SYS_STAT_H 1
+| #define HAVE_STDLIB_H 1
+| #define HAVE_STRING_H 1
+| #define HAVE_MEMORY_H 1
+| #define HAVE_STRINGS_H 1
+| #define HAVE_INTTYPES_H 1
+| #define HAVE_STDINT_H 1
+| #define HAVE_UNISTD_H 1
+| #define HAVE_LONG_LONG 1
+| #define TIME_WITH_SYS_TIME 1
+| #define HAVE_SYS_WAIT_H 1
+| #define HAVE_SYS_TIME_H 1
+| #define HAVE_MALLOC_H 1
+| #define HAVE_STDLIB_H 1
+| #define HAVE_UNISTD_H 1
+| #define HAVE_STDDEF_H 1
+| #define HAVE_STDARG_H 1
+| #define HAVE_ERRNO_H 1
+| #define SHAPE 1
+| #define HAVE_GLX 1
+| #define HAVE_XPM 1
+| #define HAVE_JPEG 1
+| #define HAVE_PROTOTYPES 1
+| #define HAVE_ZLIB_H 1
+| #define HAVE_PNG 1
+| #define HAVE_GIF 1
+| #define HAVE_BUILTIN_UNGIF 1
+| #define HAVE_TIFF 1
+| #define HAVE_FT2BUILD_H 1
+| #define HAVE_FREETYPE 1
+| #define HAVE_FREETYPE_FREETYPE 1
+| /* end confdefs.h.  */
+| #include <stdio.h>
+| #if HAVE_SYS_TYPES_H
+| # include <sys/types.h>
+| #endif
+| #if HAVE_SYS_STAT_H
+| # include <sys/stat.h>
+| #endif
+| #if STDC_HEADERS
+| # include <stdlib.h>
+| # include <stddef.h>
+| #else
+| # if HAVE_STDLIB_H
+| #  include <stdlib.h>
+| # endif
+| #endif
+| #if HAVE_STRING_H
+| # if !STDC_HEADERS && HAVE_MEMORY_H
+| #  include <memory.h>
+| # endif
+| # include <string.h>
+| #endif
+| #if HAVE_STRINGS_H
+| # include <strings.h>
+| #endif
+| #if HAVE_INTTYPES_H
+| # include <inttypes.h>
+| #else
+| # if HAVE_STDINT_H
+| #  include <stdint.h>
+| # endif
+| #endif
+| #if HAVE_UNISTD_H
+| # include <unistd.h>
+| #endif
+| #include <libAfterBase/astypes.h>
+configure:8380: result: no
+configure:8384: checking libAfterBase/astypes.h presence
+configure:8394: gcc -E  conftest.c
+conftest.c:43:34: error: libAfterBase/astypes.h: No such file or directory
+configure:8400: $? = 1
+configure: failed program was:
+| /* confdefs.h.  */
+| 
+| #define PACKAGE_NAME "libAfterImage"
+| #define PACKAGE_TARNAME "libAfterImage.tar"
+| #define PACKAGE_VERSION "1.07"
+| #define PACKAGE_STRING "libAfterImage 1.07"
+| #define PACKAGE_BUGREPORT "as-bugs@afterstep.org"
+| #define HAVE_MMX 1
+| #define STDC_HEADERS 1
+| #define HAVE_SYS_TYPES_H 1
+| #define HAVE_SYS_STAT_H 1
+| #define HAVE_STDLIB_H 1
+| #define HAVE_STRING_H 1
+| #define HAVE_MEMORY_H 1
+| #define HAVE_STRINGS_H 1
+| #define HAVE_INTTYPES_H 1
+| #define HAVE_STDINT_H 1
+| #define HAVE_UNISTD_H 1
+| #define HAVE_LONG_LONG 1
+| #define TIME_WITH_SYS_TIME 1
+| #define HAVE_SYS_WAIT_H 1
+| #define HAVE_SYS_TIME_H 1
+| #define HAVE_MALLOC_H 1
+| #define HAVE_STDLIB_H 1
+| #define HAVE_UNISTD_H 1
+| #define HAVE_STDDEF_H 1
+| #define HAVE_STDARG_H 1
+| #define HAVE_ERRNO_H 1
+| #define SHAPE 1
+| #define HAVE_GLX 1
+| #define HAVE_XPM 1
+| #define HAVE_JPEG 1
+| #define HAVE_PROTOTYPES 1
+| #define HAVE_ZLIB_H 1
+| #define HAVE_PNG 1
+| #define HAVE_GIF 1
+| #define HAVE_BUILTIN_UNGIF 1
+| #define HAVE_TIFF 1
+| #define HAVE_FT2BUILD_H 1
+| #define HAVE_FREETYPE 1
+| #define HAVE_FREETYPE_FREETYPE 1
+| /* end confdefs.h.  */
+| #include <libAfterBase/astypes.h>
+configure:8420: result: no
+configure:8455: checking for libAfterBase/astypes.h
+configure:8462: result: no
+configure:8513: result: none found
+configure:8524: checking for dirent.h that defines DIR
+configure:8548: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+configure:8554: $? = 0
+configure:8558: test -z 
+			 || test ! -s conftest.err
+configure:8561: $? = 0
+configure:8564: test -s conftest.o
+configure:8567: $? = 0
+configure:8578: result: yes
+configure:8591: checking for library containing opendir
+configure:8621: gcc -o conftest -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall   -rdynamic conftest.c  >&5
+configure:8627: $? = 0
+configure:8631: test -z 
+			 || test ! -s conftest.err
+configure:8634: $? = 0
+configure:8637: test -s conftest
+configure:8640: $? = 0
+configure:8710: result: none required
+configure:8860: checking sys/dirent.h usability
+configure:8872: gcc -c -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall  conftest.c >&5
+conftest.c:78:24: error: sys/dirent.h: No such file or directory
+configure:8878: $? = 1
+configure: failed program was:
+| /* confdefs.h.  */
+| 
+| #define PACKAGE_NAME "libAfterImage"
+| #define PACKAGE_TARNAME "libAfterImage.tar"
+| #define PACKAGE_VERSION "1.07"
+| #define PACKAGE_STRING "libAfterImage 1.07"
+| #define PACKAGE_BUGREPORT "as-bugs@afterstep.org"
+| #define HAVE_MMX 1
+| #define STDC_HEADERS 1
+| #define HAVE_SYS_TYPES_H 1
+| #define HAVE_SYS_STAT_H 1
+| #define HAVE_STDLIB_H 1
+| #define HAVE_STRING_H 1
+| #define HAVE_MEMORY_H 1
+| #define HAVE_STRINGS_H 1
+| #define HAVE_INTTYPES_H 1
+| #define HAVE_STDINT_H 1
+| #define HAVE_UNISTD_H 1
+| #define HAVE_LONG_LONG 1
+| #define TIME_WITH_SYS_TIME 1
+| #define HAVE_SYS_WAIT_H 1
+| #define HAVE_SYS_TIME_H 1
+| #define HAVE_MALLOC_H 1
+| #define HAVE_STDLIB_H 1
+| #define HAVE_UNISTD_H 1
+| #define HAVE_STDDEF_H 1
+| #define HAVE_STDARG_H 1
+| #define HAVE_ERRNO_H 1
+| #define SHAPE 1
+| #define HAVE_GLX 1
+| #define HAVE_XPM 1
+| #define HAVE_JPEG 1
+| #define HAVE_PROTOTYPES 1
+| #define HAVE_ZLIB_H 1
+| #define HAVE_PNG 1
+| #define HAVE_GIF 1
+| #define HAVE_BUILTIN_UNGIF 1
+| #define HAVE_TIFF 1
+| #define HAVE_FT2BUILD_H 1
+| #define HAVE_FREETYPE 1
+| #define HAVE_FREETYPE_FREETYPE 1
+| #define HAVE_DIRENT_H 1
+| /* end confdefs.h.  */
+| #include <stdio.h>
+| #if HAVE_SYS_TYPES_H
+| # include <sys/types.h>
+| #endif
+| #if HAVE_SYS_STAT_H
+| # include <sys/stat.h>
+| #endif
+| #if STDC_HEADERS
+| # include <stdlib.h>
+| # include <stddef.h>
+| #else
+| # if HAVE_STDLIB_H
+| #  include <stdlib.h>
+| # endif
+| #endif
+| #if HAVE_STRING_H
+| # if !STDC_HEADERS && HAVE_MEMORY_H
+| #  include <memory.h>
+| # endif
+| # include <string.h>
+| #endif
+| #if HAVE_STRINGS_H
+| # include <strings.h>
+| #endif
+| #if HAVE_INTTYPES_H
+| # include <inttypes.h>
+| #else
+| # if HAVE_STDINT_H
+| #  include <stdint.h>
+| # endif
+| #endif
+| #if HAVE_UNISTD_H
+| # include <unistd.h>
+| #endif
+| #include <sys/dirent.h>
+configure:8901: result: no
+configure:8905: checking sys/dirent.h presence
+configure:8915: gcc -E  conftest.c
+conftest.c:44:24: error: sys/dirent.h: No such file or directory
+configure:8921: $? = 1
+configure: failed program was:
+| /* confdefs.h.  */
+| 
+| #define PACKAGE_NAME "libAfterImage"
+| #define PACKAGE_TARNAME "libAfterImage.tar"
+| #define PACKAGE_VERSION "1.07"
+| #define PACKAGE_STRING "libAfterImage 1.07"
+| #define PACKAGE_BUGREPORT "as-bugs@afterstep.org"
+| #define HAVE_MMX 1
+| #define STDC_HEADERS 1
+| #define HAVE_SYS_TYPES_H 1
+| #define HAVE_SYS_STAT_H 1
+| #define HAVE_STDLIB_H 1
+| #define HAVE_STRING_H 1
+| #define HAVE_MEMORY_H 1
+| #define HAVE_STRINGS_H 1
+| #define HAVE_INTTYPES_H 1
+| #define HAVE_STDINT_H 1
+| #define HAVE_UNISTD_H 1
+| #define HAVE_LONG_LONG 1
+| #define TIME_WITH_SYS_TIME 1
+| #define HAVE_SYS_WAIT_H 1
+| #define HAVE_SYS_TIME_H 1
+| #define HAVE_MALLOC_H 1
+| #define HAVE_STDLIB_H 1
+| #define HAVE_UNISTD_H 1
+| #define HAVE_STDDEF_H 1
+| #define HAVE_STDARG_H 1
+| #define HAVE_ERRNO_H 1
+| #define SHAPE 1
+| #define HAVE_GLX 1
+| #define HAVE_XPM 1
+| #define HAVE_JPEG 1
+| #define HAVE_PROTOTYPES 1
+| #define HAVE_ZLIB_H 1
+| #define HAVE_PNG 1
+| #define HAVE_GIF 1
+| #define HAVE_BUILTIN_UNGIF 1
+| #define HAVE_TIFF 1
+| #define HAVE_FT2BUILD_H 1
+| #define HAVE_FREETYPE 1
+| #define HAVE_FREETYPE_FREETYPE 1
+| #define HAVE_DIRENT_H 1
+| /* end confdefs.h.  */
+| #include <sys/dirent.h>
+configure:8941: result: no
+configure:8976: checking for sys/dirent.h
+configure:8983: result: no
+configure:9169: creating ./config.status
+
+## ---------------------- ##
+## Running config.status. ##
+## ---------------------- ##
+
+This file was extended by libAfterImage config.status 1.07, which was
+generated by GNU Autoconf 2.59.  Invocation command line was
+
+  CONFIG_FILES    = 
+  CONFIG_HEADERS  = 
+  CONFIG_LINKS    = 
+  CONFIG_COMMANDS = 
+  $ ./config.status 
+
+on mango
+
+config.status:714: creating Makefile
+config.status:714: creating afterbase.h
+config.status:714: creating afterimage-libs
+config.status:714: creating afterimage-config
+config.status:714: creating apps/Makefile
+config.status:818: creating config.h
+
+## ---------------- ##
+## Cache variables. ##
+## ---------------- ##
+
+ac_cv_build=x86_64-unknown-linux-gnu
+ac_cv_build_alias=x86_64-unknown-linux-gnu
+ac_cv_c_bigendian=no
+ac_cv_c_char_unsigned=no
+ac_cv_c_compiler_gnu=yes
+ac_cv_c_const=yes
+ac_cv_c_inline=inline
+ac_cv_env_CC_set=
+ac_cv_env_CC_value=
+ac_cv_env_CFLAGS_set=
+ac_cv_env_CFLAGS_value=
+ac_cv_env_CPPFLAGS_set=
+ac_cv_env_CPPFLAGS_value=
+ac_cv_env_CPP_set=
+ac_cv_env_CPP_value=
+ac_cv_env_LDFLAGS_set=
+ac_cv_env_LDFLAGS_value=
+ac_cv_env_build_alias_set=
+ac_cv_env_build_alias_value=
+ac_cv_env_host_alias_set=
+ac_cv_env_host_alias_value=
+ac_cv_env_target_alias_set=
+ac_cv_env_target_alias_value=
+ac_cv_exeext=
+ac_cv_func_connect=yes
+ac_cv_func_gethostbyname=yes
+ac_cv_func_remove=yes
+ac_cv_func_shmat=yes
+ac_cv_have_x='have_x=yes 		ac_x_includes= ac_x_libraries=/usr/lib64'
+ac_cv_header_dirent_dirent_h=yes
+ac_cv_header_errno_h=yes
+ac_cv_header_ft2build_h=yes
+ac_cv_header_inttypes_h=yes
+ac_cv_header_jpeglib_h=yes
+ac_cv_header_libAfterBase_astypes_h=no
+ac_cv_header_malloc_h=yes
+ac_cv_header_memory_h=yes
+ac_cv_header_png_h=yes
+ac_cv_header_stdarg_h=yes
+ac_cv_header_stdc=yes
+ac_cv_header_stddef_h=yes
+ac_cv_header_stdint_h=yes
+ac_cv_header_stdlib_h=yes
+ac_cv_header_string_h=yes
+ac_cv_header_strings_h=yes
+ac_cv_header_sys_dirent_h=no
+ac_cv_header_sys_stat_h=yes
+ac_cv_header_sys_time_h=yes
+ac_cv_header_sys_types_h=yes
+ac_cv_header_sys_wait_h=yes
+ac_cv_header_tiffio_h=yes
+ac_cv_header_time=yes
+ac_cv_header_unistd_h=yes
+ac_cv_header_zlib_h=yes
+ac_cv_host=x86_64-unknown-linux-gnu
+ac_cv_host_alias=x86_64-unknown-linux-gnu
+ac_cv_lib_GL_glDrawPixels=yes
+ac_cv_lib_ICE_IceConnectionNumber=yes
+ac_cv_lib_X11_XOpenDisplay=yes
+ac_cv_lib_Xext_XShapeCombineMask=yes
+ac_cv_objext=o
+ac_cv_path_CP=/usr/bin/cp
+ac_cv_path_FIND=/usr/bin/find
+ac_cv_path_LDCONFIG=/sbin/ldconfig
+ac_cv_path_MKDIR=/usr/bin/mkdir
+ac_cv_path_MV=/usr/bin/mv
+ac_cv_path_PERL=/usr/bin/perl
+ac_cv_path_RM=/usr/bin/rm
+ac_cv_path_XARGS=/usr/bin/xargs
+ac_cv_path_install='/usr/bin/install -c'
+ac_cv_prog_CPP='gcc -E'
+ac_cv_prog_ac_ct_CC=gcc
+ac_cv_prog_ac_ct_RANLIB=ranlib
+ac_cv_prog_cc_g=yes
+ac_cv_prog_cc_stdc=
+ac_cv_prog_egrep='grep -E'
+ac_cv_search_opendir='none required'
+ac_cv_type_long_long=yes
+ac_cv_type_unsigned_char=yes
+ac_cv_type_unsigned_short=yes
+
+## ----------------- ##
+## Output variables. ##
+## ----------------- ##
+
+AFTERBASE_C='afterbase.o'
+AFTERBASE_INCS_PATH=''
+AFTERIMAGE_APPS_LIBS='-L../ -lAfterImage -lfreetype -lz -ltiff -lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm'
+AFTERIMAGE_LIBS='-L/usr/local/lib -lAfterImage  -lfreetype -lz -ltiff -lX11 -L/usr/lib64 -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm'
+AFTERIMAGE_LIBS_EXTERNAL='-lfreetype -lz -ltiff -lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm'
+AFTERIMAGE_LIB_LIBS='-L./ -lfreetype -lz -ltiff -lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm'
+AFTERIMAGE_TEST_LIBS='-L./ -lAfterImage -lfreetype -lz -ltiff -lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm'
+CC='gcc'
+CFLAGS='-O3 -DNO_DEBUG_OUTPUT -fPIC -Wall'
+CP='/usr/bin/cp'
+CPP='gcc -E'
+CPPFLAGS=''
+DEFINE_XLOCALE=''
+DEFS='-DHAVE_CONFIG_H'
+ECHO_C=''
+ECHO_N='-n'
+ECHO_T=''
+EGREP='grep -E'
+EXEEXT=''
+FIND='/usr/bin/find'
+GIF_CFLAGS=''
+HAVE_AFTERBASE_FLAG='0'
+INSTALL='/usr/bin/install -c'
+INSTALL_DATA='${INSTALL} -m 644'
+INSTALL_LIB=''
+INSTALL_PROGRAM='${INSTALL}'
+INSTALL_SCRIPT='${INSTALL}'
+JPEG_CFLAGS=''
+JPEG_OBJS=''
+LDCONFIG='/sbin/ldconfig'
+LDFLAGS=' -rdynamic'
+LEX=''
+LEXLIB=''
+LIBINSTALL='install.static'
+LIBOBJS=''
+LIBPROG='$(LIB_STATIC)'
+LIBS=''
+LN_S='ln -s'
+LTLIBOBJS=''
+MKDIR='/usr/bin/mkdir'
+MV='/usr/bin/mv'
+OBJEXT='o'
+PACKAGE_BUGREPORT='as-bugs@afterstep.org'
+PACKAGE_NAME='libAfterImage'
+PACKAGE_STRING='libAfterImage 1.07'
+PACKAGE_TARNAME='libAfterImage.tar'
+PACKAGE_VERSION='1.07'
+PATH_SEPARATOR=':'
+PERL='/usr/bin/perl'
+PNG_CFLAGS=''
+PNG_OBJS=''
+RANLIB='ranlib'
+RM='/usr/bin/rm'
+SHELL='/bin/sh'
+TIFF_CFLAGS=''
+TTF_INCLUDES=' -I/usr/include/freetype2'
+UNGIF_OBJS='$(LIBUNGIF_OBJS)'
+USE_DEFAULT_AFTERBASE='0'
+XARGS='/usr/bin/xargs'
+XPM_CFLAGS=''
+X_CFLAGS=''
+X_EXTRA_LIBS=''
+X_LIBS=' -L/usr/lib64'
+X_PRE_LIBS=' -lSM -lICE'
+YACC=''
+ZLIB_OBJS=''
+ac_ct_CC='gcc'
+ac_ct_RANLIB='ranlib'
+bindir='${exec_prefix}/bin'
+build='x86_64-unknown-linux-gnu'
+build_alias=''
+build_cpu='x86_64'
+build_os='linux-gnu'
+build_vendor='unknown'
+datadir='${prefix}/share'
+exec_prefix='/usr/local'
+have_afterbase='no'
+host='x86_64-unknown-linux-gnu'
+host_alias=''
+host_cpu='x86_64'
+host_os='linux-gnu'
+host_vendor='unknown'
+image_format='png'
+includedir='/usr/local/include'
+infodir='${prefix}/info'
+lib_file_name='libAfterImage'
+lib_name='LIBAFTERIMAGE'
+libdir='/usr/local/lib'
+libexecdir='${exec_prefix}/libexec'
+localstatedir='${prefix}/var'
+mandir='/usr/local/man'
+oldincludedir='/usr/include'
+prefix='/usr/local'
+program_transform_name='s,x,x,'
+sbindir='${exec_prefix}/sbin'
+sharedstatedir='${prefix}/com'
+sysconfdir='${prefix}/etc'
+target_alias=''
+user_ldflags=' -rdynamic'
+version='1.07'
+version_major='1'
+with_locale=''
+x_libs='-lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext'
+
+## ------------- ##
+## Output files. ##
+## ------------- ##
+
+LIBAFTERIMAGEFILES='.shared'
+
+## ----------- ##
+## confdefs.h. ##
+## ----------- ##
+
+#define HAVE_BUILTIN_UNGIF 1
+#define HAVE_DIRENT_H 1
+#define HAVE_ERRNO_H 1
+#define HAVE_FREETYPE 1
+#define HAVE_FREETYPE_FREETYPE 1
+#define HAVE_FT2BUILD_H 1
+#define HAVE_GIF 1
+#define HAVE_GLX 1
+#define HAVE_INTTYPES_H 1
+#define HAVE_JPEG 1
+#define HAVE_LONG_LONG 1
+#define HAVE_MALLOC_H 1
+#define HAVE_MEMORY_H 1
+#define HAVE_MMX 1
+#define HAVE_PNG 1
+#define HAVE_PROTOTYPES 1
+#define HAVE_STDARG_H 1
+#define HAVE_STDDEF_H 1
+#define HAVE_STDINT_H 1
+#define HAVE_STDLIB_H 1
+#define HAVE_STDLIB_H 1
+#define HAVE_STRINGS_H 1
+#define HAVE_STRING_H 1
+#define HAVE_SYS_STAT_H 1
+#define HAVE_SYS_TIME_H 1
+#define HAVE_SYS_TYPES_H 1
+#define HAVE_SYS_WAIT_H 1
+#define HAVE_TIFF 1
+#define HAVE_UNISTD_H 1
+#define HAVE_UNISTD_H 1
+#define HAVE_XPM 1
+#define HAVE_ZLIB_H 1
+#define PACKAGE_BUGREPORT "as-bugs@afterstep.org"
+#define PACKAGE_NAME "libAfterImage"
+#define PACKAGE_STRING "libAfterImage 1.07"
+#define PACKAGE_TARNAME "libAfterImage.tar"
+#define PACKAGE_VERSION "1.07"
+#define SHAPE 1
+#define STDC_HEADERS 1
+#define TIME_WITH_SYS_TIME 1
+
+configure: exit 0
diff -Nur libAfterImage-1.07/config.status libAfterImage-1.07.new/config.status
--- libAfterImage-1.07/config.status	1970-01-01 01:00:00.000000000 +0100
+++ libAfterImage-1.07.new/config.status	2006-09-13 12:00:57.000000000 +0100
@@ -0,0 +1,1037 @@
+#! /bin/sh
+# Generated by configure.
+# Run this file to recreate the current configuration.
+# Compiler output produced by configure, useful for debugging
+# configure, is in config.log if it exists.
+
+debug=false
+ac_cs_recheck=false
+ac_cs_silent=false
+SHELL=${CONFIG_SHELL-/bin/sh}
+## --------------------- ##
+## M4sh Initialization.  ##
+## --------------------- ##
+
+# Be Bourne compatible
+if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+  emulate sh
+  NULLCMD=:
+  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
+  # is contrary to our usage.  Disable this feature.
+  alias -g '${1+"$@"}'='"$@"'
+elif test -n "${BASH_VERSION+set}" && (set -o posix) >/dev/null 2>&1; then
+  set -o posix
+fi
+DUALCASE=1; export DUALCASE # for MKS sh
+
+# Support unset when possible.
+if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
+  as_unset=unset
+else
+  as_unset=false
+fi
+
+
+# Work around bugs in pre-3.0 UWIN ksh.
+$as_unset ENV MAIL MAILPATH
+PS1='$ '
+PS2='> '
+PS4='+ '
+
+# NLS nuisances.
+for as_var in \
+  LANG LANGUAGE LC_ADDRESS LC_ALL LC_COLLATE LC_CTYPE LC_IDENTIFICATION \
+  LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER \
+  LC_TELEPHONE LC_TIME
+do
+  if (set +x; test -z "`(eval $as_var=C; export $as_var) 2>&1`"); then
+    eval $as_var=C; export $as_var
+  else
+    $as_unset $as_var
+  fi
+done
+
+# Required to use basename.
+if expr a : '\(a\)' >/dev/null 2>&1; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+if (basename /) >/dev/null 2>&1 && test "X`basename / 2>&1`" = "X/"; then
+  as_basename=basename
+else
+  as_basename=false
+fi
+
+
+# Name of the executable.
+as_me=`$as_basename "$0" ||
+$as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
+	 X"$0" : 'X\(//\)$' \| \
+	 X"$0" : 'X\(/\)$' \| \
+	 .     : '\(.\)' 2>/dev/null ||
+echo X/"$0" |
+    sed '/^.*\/\([^/][^/]*\)\/*$/{ s//\1/; q; }
+  	  /^X\/\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\/\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+
+
+# PATH needs CR, and LINENO needs CR and PATH.
+# Avoid depending upon Character Ranges.
+as_cr_letters='abcdefghijklmnopqrstuvwxyz'
+as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
+as_cr_Letters=$as_cr_letters$as_cr_LETTERS
+as_cr_digits='0123456789'
+as_cr_alnum=$as_cr_Letters$as_cr_digits
+
+# The user is always right.
+if test "${PATH_SEPARATOR+set}" != set; then
+  echo "#! /bin/sh" >conf$$.sh
+  echo  "exit 0"   >>conf$$.sh
+  chmod +x conf$$.sh
+  if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
+    PATH_SEPARATOR=';'
+  else
+    PATH_SEPARATOR=:
+  fi
+  rm -f conf$$.sh
+fi
+
+
+  as_lineno_1=$LINENO
+  as_lineno_2=$LINENO
+  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
+  test "x$as_lineno_1" != "x$as_lineno_2" &&
+  test "x$as_lineno_3"  = "x$as_lineno_2"  || {
+  # Find who we are.  Look in the path if we contain no path at all
+  # relative or not.
+  case $0 in
+    *[\\/]* ) as_myself=$0 ;;
+    *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
+done
+
+       ;;
+  esac
+  # We did not find ourselves, most probably we were run as `sh COMMAND'
+  # in which case we are not to be found in the path.
+  if test "x$as_myself" = x; then
+    as_myself=$0
+  fi
+  if test ! -f "$as_myself"; then
+    { { echo "$as_me:$LINENO: error: cannot find myself; rerun with an absolute path" >&5
+echo "$as_me: error: cannot find myself; rerun with an absolute path" >&2;}
+   { (exit 1); exit 1; }; }
+  fi
+  case $CONFIG_SHELL in
+  '')
+    as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for as_base in sh bash ksh sh5; do
+	 case $as_dir in
+	 /*)
+	   if ("$as_dir/$as_base" -c '
+  as_lineno_1=$LINENO
+  as_lineno_2=$LINENO
+  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
+  test "x$as_lineno_1" != "x$as_lineno_2" &&
+  test "x$as_lineno_3"  = "x$as_lineno_2" ') 2>/dev/null; then
+	     $as_unset BASH_ENV || test "${BASH_ENV+set}" != set || { BASH_ENV=; export BASH_ENV; }
+	     $as_unset ENV || test "${ENV+set}" != set || { ENV=; export ENV; }
+	     CONFIG_SHELL=$as_dir/$as_base
+	     export CONFIG_SHELL
+	     exec "$CONFIG_SHELL" "$0" ${1+"$@"}
+	   fi;;
+	 esac
+       done
+done
+;;
+  esac
+
+  # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
+  # uniformly replaced by the line number.  The first 'sed' inserts a
+  # line-number line before each line; the second 'sed' does the real
+  # work.  The second script uses 'N' to pair each line-number line
+  # with the numbered line, and appends trailing '-' during
+  # substitution so that $LINENO is not a special case at line end.
+  # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
+  # second 'sed' script.  Blame Lee E. McMahon for sed's syntax.  :-)
+  sed '=' <$as_myself |
+    sed '
+      N
+      s,$,-,
+      : loop
+      s,^\(['$as_cr_digits']*\)\(.*\)[$]LINENO\([^'$as_cr_alnum'_]\),\1\2\1\3,
+      t loop
+      s,-$,,
+      s,^['$as_cr_digits']*\n,,
+    ' >$as_me.lineno &&
+  chmod +x $as_me.lineno ||
+    { { echo "$as_me:$LINENO: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&5
+echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2;}
+   { (exit 1); exit 1; }; }
+
+  # Don't try to exec as it changes $[0], causing all sort of problems
+  # (the dirname of $[0] is not the place where we might find the
+  # original and so on.  Autoconf is especially sensible to this).
+  . ./$as_me.lineno
+  # Exit status is that of the last command.
+  exit
+}
+
+
+case `echo "testing\c"; echo 1,2,3`,`echo -n testing; echo 1,2,3` in
+  *c*,-n*) ECHO_N= ECHO_C='
+' ECHO_T='	' ;;
+  *c*,*  ) ECHO_N=-n ECHO_C= ECHO_T= ;;
+  *)       ECHO_N= ECHO_C='\c' ECHO_T= ;;
+esac
+
+if expr a : '\(a\)' >/dev/null 2>&1; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+rm -f conf$$ conf$$.exe conf$$.file
+echo >conf$$.file
+if ln -s conf$$.file conf$$ 2>/dev/null; then
+  # We could just check for DJGPP; but this test a) works b) is more generic
+  # and c) will remain valid once DJGPP supports symlinks (DJGPP 2.04).
+  if test -f conf$$.exe; then
+    # Don't use ln at all; we don't have any links
+    as_ln_s='cp -p'
+  else
+    as_ln_s='ln -s'
+  fi
+elif ln conf$$.file conf$$ 2>/dev/null; then
+  as_ln_s=ln
+else
+  as_ln_s='cp -p'
+fi
+rm -f conf$$ conf$$.exe conf$$.file
+
+if mkdir -p . 2>/dev/null; then
+  as_mkdir_p=:
+else
+  test -d ./-p && rmdir ./-p
+  as_mkdir_p=false
+fi
+
+as_executable_p="test -f"
+
+# Sed expression to map a string onto a valid CPP name.
+as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
+
+# Sed expression to map a string onto a valid variable name.
+as_tr_sh="eval sed 'y%*+%pp%;s%[^_$as_cr_alnum]%_%g'"
+
+
+# IFS
+# We need space, tab and new line, in precisely that order.
+as_nl='
+'
+IFS=" 	$as_nl"
+
+# CDPATH.
+$as_unset CDPATH
+
+exec 6>&1
+
+# Open the log real soon, to keep \$[0] and so on meaningful, and to
+# report actual input values of CONFIG_FILES etc. instead of their
+# values after options handling.  Logging --version etc. is OK.
+exec 5>>config.log
+{
+  echo
+  sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
+## Running $as_me. ##
+_ASBOX
+} >&5
+cat >&5 <<_CSEOF
+
+This file was extended by libAfterImage $as_me 1.07, which was
+generated by GNU Autoconf 2.59.  Invocation command line was
+
+  CONFIG_FILES    = $CONFIG_FILES
+  CONFIG_HEADERS  = $CONFIG_HEADERS
+  CONFIG_LINKS    = $CONFIG_LINKS
+  CONFIG_COMMANDS = $CONFIG_COMMANDS
+  $ $0 $@
+
+_CSEOF
+echo "on `(hostname || uname -n) 2>/dev/null | sed 1q`" >&5
+echo >&5
+config_files=" Makefile afterbase.h afterimage-libs afterimage-config apps/Makefile"
+config_headers=" config.h:config.h.in"
+
+ac_cs_usage="\
+\`$as_me' instantiates files from templates according to the
+current configuration.
+
+Usage: $0 [OPTIONS] [FILE]...
+
+  -h, --help       print this help, then exit
+  -V, --version    print version number, then exit
+  -q, --quiet      do not print progress messages
+  -d, --debug      don't remove temporary files
+      --recheck    update $as_me by reconfiguring in the same conditions
+  --file=FILE[:TEMPLATE]
+		   instantiate the configuration file FILE
+  --header=FILE[:TEMPLATE]
+		   instantiate the configuration header FILE
+
+Configuration files:
+$config_files
+
+Configuration headers:
+$config_headers
+
+Report bugs to <bug-autoconf@gnu.org>."
+ac_cs_version="\
+libAfterImage config.status 1.07
+configured by ./configure, generated by GNU Autoconf 2.59,
+  with options \"'--enable-glx'\"
+
+Copyright (C) 2003 Free Software Foundation, Inc.
+This config.status script is free software; the Free Software Foundation
+gives unlimited permission to copy, distribute and modify it."
+srcdir=.
+INSTALL="/usr/bin/install -c"
+# If no file are specified by the user, then we need to provide default
+# value.  By we need to know if files were specified by the user.
+ac_need_defaults=:
+while test $# != 0
+do
+  case $1 in
+  --*=*)
+    ac_option=`expr "x$1" : 'x\([^=]*\)='`
+    ac_optarg=`expr "x$1" : 'x[^=]*=\(.*\)'`
+    ac_shift=:
+    ;;
+  -*)
+    ac_option=$1
+    ac_optarg=$2
+    ac_shift=shift
+    ;;
+  *) # This is not an option, so the user has probably given explicit
+     # arguments.
+     ac_option=$1
+     ac_need_defaults=false;;
+  esac
+
+  case $ac_option in
+  # Handling of the options.
+  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
+    ac_cs_recheck=: ;;
+  --version | --vers* | -V )
+    echo "$ac_cs_version"; exit 0 ;;
+  --he | --h)
+    # Conflict between --help and --header
+    { { echo "$as_me:$LINENO: error: ambiguous option: $1
+Try \`$0 --help' for more information." >&5
+echo "$as_me: error: ambiguous option: $1
+Try \`$0 --help' for more information." >&2;}
+   { (exit 1); exit 1; }; };;
+  --help | --hel | -h )
+    echo "$ac_cs_usage"; exit 0 ;;
+  --debug | --d* | -d )
+    debug=: ;;
+  --file | --fil | --fi | --f )
+    $ac_shift
+    CONFIG_FILES="$CONFIG_FILES $ac_optarg"
+    ac_need_defaults=false;;
+  --header | --heade | --head | --hea )
+    $ac_shift
+    CONFIG_HEADERS="$CONFIG_HEADERS $ac_optarg"
+    ac_need_defaults=false;;
+  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
+  | -silent | --silent | --silen | --sile | --sil | --si | --s)
+    ac_cs_silent=: ;;
+
+  # This is an error.
+  -*) { { echo "$as_me:$LINENO: error: unrecognized option: $1
+Try \`$0 --help' for more information." >&5
+echo "$as_me: error: unrecognized option: $1
+Try \`$0 --help' for more information." >&2;}
+   { (exit 1); exit 1; }; } ;;
+
+  *) ac_config_targets="$ac_config_targets $1" ;;
+
+  esac
+  shift
+done
+
+ac_configure_extra_args=
+
+if $ac_cs_silent; then
+  exec 6>/dev/null
+  ac_configure_extra_args="$ac_configure_extra_args --silent"
+fi
+
+if $ac_cs_recheck; then
+  echo "running /bin/sh ./configure " '--enable-glx' $ac_configure_extra_args " --no-create --no-recursion" >&6
+  exec /bin/sh ./configure '--enable-glx' $ac_configure_extra_args --no-create --no-recursion
+fi
+
+for ac_config_target in $ac_config_targets
+do
+  case "$ac_config_target" in
+  # Handling of arguments.
+  "Makefile" ) CONFIG_FILES="$CONFIG_FILES Makefile" ;;
+  "afterbase.h" ) CONFIG_FILES="$CONFIG_FILES afterbase.h" ;;
+  "afterimage-libs" ) CONFIG_FILES="$CONFIG_FILES afterimage-libs" ;;
+  "afterimage-config" ) CONFIG_FILES="$CONFIG_FILES afterimage-config" ;;
+  "apps/Makefile" ) CONFIG_FILES="$CONFIG_FILES apps/Makefile" ;;
+  "config.h" ) CONFIG_HEADERS="$CONFIG_HEADERS config.h:config.h.in" ;;
+  *) { { echo "$as_me:$LINENO: error: invalid argument: $ac_config_target" >&5
+echo "$as_me: error: invalid argument: $ac_config_target" >&2;}
+   { (exit 1); exit 1; }; };;
+  esac
+done
+
+# If the user did not use the arguments to specify the items to instantiate,
+# then the envvar interface is used.  Set only those that are not.
+# We use the long form for the default assignment because of an extremely
+# bizarre bug on SunOS 4.1.3.
+if $ac_need_defaults; then
+  test "${CONFIG_FILES+set}" = set || CONFIG_FILES=$config_files
+  test "${CONFIG_HEADERS+set}" = set || CONFIG_HEADERS=$config_headers
+fi
+
+# Have a temporary directory for convenience.  Make it in the build tree
+# simply because there is no reason to put it here, and in addition,
+# creating and moving files from /tmp can sometimes cause problems.
+# Create a temporary directory, and hook for its removal unless debugging.
+$debug ||
+{
+  trap 'exit_status=$?; rm -rf $tmp && exit $exit_status' 0
+  trap '{ (exit 1); exit 1; }' 1 2 13 15
+}
+
+# Create a (secure) tmp directory for tmp files.
+
+{
+  tmp=`(umask 077 && mktemp -d -q "./confstatXXXXXX") 2>/dev/null` &&
+  test -n "$tmp" && test -d "$tmp"
+}  ||
+{
+  tmp=./confstat$$-$RANDOM
+  (umask 077 && mkdir $tmp)
+} ||
+{
+   echo "$me: cannot create a temporary directory in ." >&2
+   { (exit 1); exit 1; }
+}
+
+
+#
+# CONFIG_FILES section.
+#
+
+# No need to generate the scripts if there are no CONFIG_FILES.
+# This happens for instance when ./config.status config.h
+if test -n "$CONFIG_FILES"; then
+  # Protect against being on the right side of a sed subst in config.status.
+  sed 's/,@/@@/; s/@,/@@/; s/,;t t$/@;t t/; /@;t t$/s/[\\&,]/\\&/g;
+   s/@@/,@/; s/@@/@,/; s/@;t t$/,;t t/' >$tmp/subs.sed <<\CEOF
+s,@SHELL@,/bin/sh,;t t
+s,@PATH_SEPARATOR@,:,;t t
+s,@PACKAGE_NAME@,libAfterImage,;t t
+s,@PACKAGE_TARNAME@,libAfterImage.tar,;t t
+s,@PACKAGE_VERSION@,1.07,;t t
+s,@PACKAGE_STRING@,libAfterImage 1.07,;t t
+s,@PACKAGE_BUGREPORT@,as-bugs@afterstep.org,;t t
+s,@exec_prefix@,/usr/local,;t t
+s,@prefix@,/usr/local,;t t
+s,@program_transform_name@,s,x,x,,;t t
+s,@bindir@,${exec_prefix}/bin,;t t
+s,@sbindir@,${exec_prefix}/sbin,;t t
+s,@libexecdir@,${exec_prefix}/libexec,;t t
+s,@datadir@,${prefix}/share,;t t
+s,@sysconfdir@,${prefix}/etc,;t t
+s,@sharedstatedir@,${prefix}/com,;t t
+s,@localstatedir@,${prefix}/var,;t t
+s,@libdir@,/usr/local/lib,;t t
+s,@includedir@,/usr/local/include,;t t
+s,@oldincludedir@,/usr/include,;t t
+s,@infodir@,${prefix}/info,;t t
+s,@mandir@,/usr/local/man,;t t
+s,@build_alias@,,;t t
+s,@host_alias@,,;t t
+s,@target_alias@,,;t t
+s,@DEFS@,-DHAVE_CONFIG_H,;t t
+s,@ECHO_C@,,;t t
+s,@ECHO_N@,-n,;t t
+s,@ECHO_T@,,;t t
+s,@LIBS@,,;t t
+s,@CC@,gcc,;t t
+s,@CFLAGS@,-O3 -DNO_DEBUG_OUTPUT -fPIC -Wall,;t t
+s,@LDFLAGS@, -rdynamic,;t t
+s,@CPPFLAGS@,,;t t
+s,@ac_ct_CC@,gcc,;t t
+s,@EXEEXT@,,;t t
+s,@OBJEXT@,o,;t t
+s,@LN_S@,ln -s,;t t
+s,@build@,x86_64-unknown-linux-gnu,;t t
+s,@build_cpu@,x86_64,;t t
+s,@build_vendor@,unknown,;t t
+s,@build_os@,linux-gnu,;t t
+s,@host@,x86_64-unknown-linux-gnu,;t t
+s,@host_cpu@,x86_64,;t t
+s,@host_vendor@,unknown,;t t
+s,@host_os@,linux-gnu,;t t
+s,@INSTALL@,/usr/bin/install -c,;t t
+s,@INSTALL_PROGRAM@,${INSTALL},;t t
+s,@INSTALL_DATA@,${INSTALL} -m 644,;t t
+s,@INSTALL_LIB@,,;t t
+s,@RANLIB@,ranlib,;t t
+s,@RM@,/usr/bin/rm,;t t
+s,@MV@,/usr/bin/mv,;t t
+s,@CP@,/usr/bin/cp,;t t
+s,@MKDIR@,/usr/bin/mkdir,;t t
+s,@PERL@,/usr/bin/perl,;t t
+s,@FIND@,/usr/bin/find,;t t
+s,@XARGS@,/usr/bin/xargs,;t t
+s,@LDCONFIG@,/sbin/ldconfig,;t t
+s,@LEX@,,;t t
+s,@LEXLIB@,,;t t
+s,@YACC@,,;t t
+s,@INSTALL_SCRIPT@,${INSTALL},;t t
+s,@ac_ct_RANLIB@,ranlib,;t t
+s,@CPP@,gcc -E,;t t
+s,@X_CFLAGS@,,;t t
+s,@X_PRE_LIBS@, -lSM -lICE,;t t
+s,@X_LIBS@, -L/usr/lib64,;t t
+s,@X_EXTRA_LIBS@,,;t t
+s,@EGREP@,grep -E,;t t
+s,@XPM_CFLAGS@,,;t t
+s,@JPEG_CFLAGS@,,;t t
+s,@PNG_CFLAGS@,,;t t
+s,@GIF_CFLAGS@,,;t t
+s,@TIFF_CFLAGS@,,;t t
+s,@TTF_INCLUDES@, -I/usr/include/freetype2,;t t
+s,@JPEG_OBJS@,,;t t
+s,@ZLIB_OBJS@,,;t t
+s,@PNG_OBJS@,,;t t
+s,@UNGIF_OBJS@,$(LIBUNGIF_OBJS),;t t
+s,@AFTERIMAGE_LIBS_EXTERNAL@,-lfreetype -lz -ltiff -lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm,;t t
+s,@AFTERBASE_INCS_PATH@,,;t t
+s,@USE_DEFAULT_AFTERBASE@,0,;t t
+s,@HAVE_AFTERBASE_FLAG@,0,;t t
+s,@AFTERBASE_C@,afterbase.o,;t t
+s,@have_afterbase@,no,;t t
+s,@AFTERIMAGE_APPS_LIBS@,-L../ -lAfterImage -lfreetype -lz -ltiff -lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm,;t t
+s,@AFTERIMAGE_TEST_LIBS@,-L./ -lAfterImage -lfreetype -lz -ltiff -lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm,;t t
+s,@AFTERIMAGE_LIB_LIBS@,-L./ -lfreetype -lz -ltiff -lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm,;t t
+s,@AFTERIMAGE_LIBS@,-L/usr/local/lib -lAfterImage  -lfreetype -lz -ltiff -lX11 -L/usr/lib64 -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm,;t t
+s,@image_format@,png,;t t
+s,@version@,1.07,;t t
+s,@version_major@,1,;t t
+s,@lib_name@,LIBAFTERIMAGE,;t t
+s,@lib_file_name@,libAfterImage,;t t
+s,@with_locale@,,;t t
+s,@user_ldflags@, -rdynamic,;t t
+s,@x_libs@,-lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext,;t t
+s,@LIBPROG@,$(LIB_STATIC),;t t
+s,@LIBINSTALL@,install.static,;t t
+s,@DEFINE_XLOCALE@,,;t t
+s,@LIBOBJS@,,;t t
+s,@LTLIBOBJS@,,;t t
+/@LIBAFTERIMAGEFILES@/r .shared
+s,@LIBAFTERIMAGEFILES@,,;t t
+CEOF
+
+  # Split the substitutions into bite-sized pieces for seds with
+  # small command number limits, like on Digital OSF/1 and HP-UX.
+  ac_max_sed_lines=48
+  ac_sed_frag=1 # Number of current file.
+  ac_beg=1 # First line for current file.
+  ac_end=$ac_max_sed_lines # Line after last line for current file.
+  ac_more_lines=:
+  ac_sed_cmds=
+  while $ac_more_lines; do
+    if test $ac_beg -gt 1; then
+      sed "1,${ac_beg}d; ${ac_end}q" $tmp/subs.sed >$tmp/subs.frag
+    else
+      sed "${ac_end}q" $tmp/subs.sed >$tmp/subs.frag
+    fi
+    if test ! -s $tmp/subs.frag; then
+      ac_more_lines=false
+    else
+      # The purpose of the label and of the branching condition is to
+      # speed up the sed processing (if there are no `@' at all, there
+      # is no need to browse any of the substitutions).
+      # These are the two extra sed commands mentioned above.
+      (echo ':t
+  /@[a-zA-Z_][a-zA-Z_0-9]*@/!b' && cat $tmp/subs.frag) >$tmp/subs-$ac_sed_frag.sed
+      if test -z "$ac_sed_cmds"; then
+	ac_sed_cmds="sed -f $tmp/subs-$ac_sed_frag.sed"
+      else
+	ac_sed_cmds="$ac_sed_cmds | sed -f $tmp/subs-$ac_sed_frag.sed"
+      fi
+      ac_sed_frag=`expr $ac_sed_frag + 1`
+      ac_beg=$ac_end
+      ac_end=`expr $ac_end + $ac_max_sed_lines`
+    fi
+  done
+  if test -z "$ac_sed_cmds"; then
+    ac_sed_cmds=cat
+  fi
+fi # test -n "$CONFIG_FILES"
+
+for ac_file in : $CONFIG_FILES; do test "x$ac_file" = x: && continue
+  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
+  case $ac_file in
+  - | *:- | *:-:* ) # input from stdin
+	cat >$tmp/stdin
+	ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+	ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  *:* ) ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+	ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  * )   ac_file_in=$ac_file.in ;;
+  esac
+
+  # Compute @srcdir@, @top_srcdir@, and @INSTALL@ for subdirectories.
+  ac_dir=`(dirname "$ac_file") 2>/dev/null ||
+$as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	 X"$ac_file" : 'X\(//\)[^/]' \| \
+	 X"$ac_file" : 'X\(//\)$' \| \
+	 X"$ac_file" : 'X\(/\)' \| \
+	 .     : '\(.\)' 2>/dev/null ||
+echo X"$ac_file" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+  { if $as_mkdir_p; then
+    mkdir -p "$ac_dir"
+  else
+    as_dir="$ac_dir"
+    as_dirs=
+    while test ! -d "$as_dir"; do
+      as_dirs="$as_dir $as_dirs"
+      as_dir=`(dirname "$as_dir") 2>/dev/null ||
+$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	 X"$as_dir" : 'X\(//\)[^/]' \| \
+	 X"$as_dir" : 'X\(//\)$' \| \
+	 X"$as_dir" : 'X\(/\)' \| \
+	 .     : '\(.\)' 2>/dev/null ||
+echo X"$as_dir" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+    done
+    test ! -n "$as_dirs" || mkdir $as_dirs
+  fi || { { echo "$as_me:$LINENO: error: cannot create directory \"$ac_dir\"" >&5
+echo "$as_me: error: cannot create directory \"$ac_dir\"" >&2;}
+   { (exit 1); exit 1; }; }; }
+
+  ac_builddir=.
+
+if test "$ac_dir" != .; then
+  ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
+  # A "../" for each directory in $ac_dir_suffix.
+  ac_top_builddir=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,../,g'`
+else
+  ac_dir_suffix= ac_top_builddir=
+fi
+
+case $srcdir in
+  .)  # No --srcdir option.  We are building in place.
+    ac_srcdir=.
+    if test -z "$ac_top_builddir"; then
+       ac_top_srcdir=.
+    else
+       ac_top_srcdir=`echo $ac_top_builddir | sed 's,/$,,'`
+    fi ;;
+  [\\/]* | ?:[\\/]* )  # Absolute path.
+    ac_srcdir=$srcdir$ac_dir_suffix;
+    ac_top_srcdir=$srcdir ;;
+  *) # Relative path.
+    ac_srcdir=$ac_top_builddir$srcdir$ac_dir_suffix
+    ac_top_srcdir=$ac_top_builddir$srcdir ;;
+esac
+
+# Do not use `cd foo && pwd` to compute absolute paths, because
+# the directories may not exist.
+case `pwd` in
+.) ac_abs_builddir="$ac_dir";;
+*)
+  case "$ac_dir" in
+  .) ac_abs_builddir=`pwd`;;
+  [\\/]* | ?:[\\/]* ) ac_abs_builddir="$ac_dir";;
+  *) ac_abs_builddir=`pwd`/"$ac_dir";;
+  esac;;
+esac
+case $ac_abs_builddir in
+.) ac_abs_top_builddir=${ac_top_builddir}.;;
+*)
+  case ${ac_top_builddir}. in
+  .) ac_abs_top_builddir=$ac_abs_builddir;;
+  [\\/]* | ?:[\\/]* ) ac_abs_top_builddir=${ac_top_builddir}.;;
+  *) ac_abs_top_builddir=$ac_abs_builddir/${ac_top_builddir}.;;
+  esac;;
+esac
+case $ac_abs_builddir in
+.) ac_abs_srcdir=$ac_srcdir;;
+*)
+  case $ac_srcdir in
+  .) ac_abs_srcdir=$ac_abs_builddir;;
+  [\\/]* | ?:[\\/]* ) ac_abs_srcdir=$ac_srcdir;;
+  *) ac_abs_srcdir=$ac_abs_builddir/$ac_srcdir;;
+  esac;;
+esac
+case $ac_abs_builddir in
+.) ac_abs_top_srcdir=$ac_top_srcdir;;
+*)
+  case $ac_top_srcdir in
+  .) ac_abs_top_srcdir=$ac_abs_builddir;;
+  [\\/]* | ?:[\\/]* ) ac_abs_top_srcdir=$ac_top_srcdir;;
+  *) ac_abs_top_srcdir=$ac_abs_builddir/$ac_top_srcdir;;
+  esac;;
+esac
+
+
+  case $INSTALL in
+  [\\/$]* | ?:[\\/]* ) ac_INSTALL=$INSTALL ;;
+  *) ac_INSTALL=$ac_top_builddir$INSTALL ;;
+  esac
+
+  if test x"$ac_file" != x-; then
+    { echo "$as_me:$LINENO: creating $ac_file" >&5
+echo "$as_me: creating $ac_file" >&6;}
+    rm -f "$ac_file"
+  fi
+  # Let's still pretend it is `configure' which instantiates (i.e., don't
+  # use $as_me), people would be surprised to read:
+  #    /* config.h.  Generated by config.status.  */
+  if test x"$ac_file" = x-; then
+    configure_input=
+  else
+    configure_input="$ac_file.  "
+  fi
+  configure_input=$configure_input"Generated from `echo $ac_file_in |
+				     sed 's,.*/,,'` by configure."
+
+  # First look for the input files in the build tree, otherwise in the
+  # src tree.
+  ac_file_inputs=`IFS=:
+    for f in $ac_file_in; do
+      case $f in
+      -) echo $tmp/stdin ;;
+      [\\/$]*)
+	 # Absolute (can't be DOS-style, as IFS=:)
+	 test -f "$f" || { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+	 echo "$f";;
+      *) # Relative
+	 if test -f "$f"; then
+	   # Build tree
+	   echo "$f"
+	 elif test -f "$srcdir/$f"; then
+	   # Source tree
+	   echo "$srcdir/$f"
+	 else
+	   # /dev/null tree
+	   { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+	 fi;;
+      esac
+    done` || { (exit 1); exit 1; }
+  sed "/^[	 ]*VPATH[	 ]*=/{
+s/:*\$(srcdir):*/:/;
+s/:*\${srcdir}:*/:/;
+s/:*@srcdir@:*/:/;
+s/^\([^=]*=[	 ]*\):*/\1/;
+s/:*$//;
+s/^[^=]*=[	 ]*$//;
+}
+
+:t
+/@[a-zA-Z_][a-zA-Z_0-9]*@/!b
+s,@configure_input@,$configure_input,;t t
+s,@srcdir@,$ac_srcdir,;t t
+s,@abs_srcdir@,$ac_abs_srcdir,;t t
+s,@top_srcdir@,$ac_top_srcdir,;t t
+s,@abs_top_srcdir@,$ac_abs_top_srcdir,;t t
+s,@builddir@,$ac_builddir,;t t
+s,@abs_builddir@,$ac_abs_builddir,;t t
+s,@top_builddir@,$ac_top_builddir,;t t
+s,@abs_top_builddir@,$ac_abs_top_builddir,;t t
+s,@INSTALL@,$ac_INSTALL,;t t
+" $ac_file_inputs | (eval "$ac_sed_cmds") >$tmp/out
+  rm -f $tmp/stdin
+  if test x"$ac_file" != x-; then
+    mv $tmp/out $ac_file
+  else
+    cat $tmp/out
+    rm -f $tmp/out
+  fi
+
+done
+
+#
+# CONFIG_HEADER section.
+#
+
+# These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
+# NAME is the cpp macro being defined and VALUE is the value it is being given.
+#
+# ac_d sets the value in "#define NAME VALUE" lines.
+ac_dA='s,^\([	 ]*\)#\([	 ]*define[	 ][	 ]*\)'
+ac_dB='[	 ].*$,\1#\2'
+ac_dC=' '
+ac_dD=',;t'
+# ac_u turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
+ac_uA='s,^\([	 ]*\)#\([	 ]*\)undef\([	 ][	 ]*\)'
+ac_uB='$,\1#\2define\3'
+ac_uC=' '
+ac_uD=',;t'
+
+for ac_file in : $CONFIG_HEADERS; do test "x$ac_file" = x: && continue
+  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
+  case $ac_file in
+  - | *:- | *:-:* ) # input from stdin
+	cat >$tmp/stdin
+	ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+	ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  *:* ) ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+	ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  * )   ac_file_in=$ac_file.in ;;
+  esac
+
+  test x"$ac_file" != x- && { echo "$as_me:$LINENO: creating $ac_file" >&5
+echo "$as_me: creating $ac_file" >&6;}
+
+  # First look for the input files in the build tree, otherwise in the
+  # src tree.
+  ac_file_inputs=`IFS=:
+    for f in $ac_file_in; do
+      case $f in
+      -) echo $tmp/stdin ;;
+      [\\/$]*)
+	 # Absolute (can't be DOS-style, as IFS=:)
+	 test -f "$f" || { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+	 # Do quote $f, to prevent DOS paths from being IFS'd.
+	 echo "$f";;
+      *) # Relative
+	 if test -f "$f"; then
+	   # Build tree
+	   echo "$f"
+	 elif test -f "$srcdir/$f"; then
+	   # Source tree
+	   echo "$srcdir/$f"
+	 else
+	   # /dev/null tree
+	   { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+	 fi;;
+      esac
+    done` || { (exit 1); exit 1; }
+  # Remove the trailing spaces.
+  sed 's/[	 ]*$//' $ac_file_inputs >$tmp/in
+
+  # Handle all the #define templates only if necessary.
+  if grep "^[	 ]*#[	 ]*define" $tmp/in >/dev/null; then
+  # If there are no defines, we may have an empty if/fi
+  :
+  cat >$tmp/defines.sed <<CEOF
+/^[	 ]*#[	 ]*define/!b
+t clr
+: clr
+${ac_dA}PACKAGE_NAME${ac_dB}PACKAGE_NAME${ac_dC}"libAfterImage"${ac_dD}
+${ac_dA}PACKAGE_TARNAME${ac_dB}PACKAGE_TARNAME${ac_dC}"libAfterImage.tar"${ac_dD}
+${ac_dA}PACKAGE_VERSION${ac_dB}PACKAGE_VERSION${ac_dC}"1.07"${ac_dD}
+${ac_dA}PACKAGE_STRING${ac_dB}PACKAGE_STRING${ac_dC}"libAfterImage 1.07"${ac_dD}
+${ac_dA}PACKAGE_BUGREPORT${ac_dB}PACKAGE_BUGREPORT${ac_dC}"as-bugs@afterstep.org"${ac_dD}
+${ac_dA}HAVE_MMX${ac_dB}HAVE_MMX${ac_dC}1${ac_dD}
+${ac_dA}STDC_HEADERS${ac_dB}STDC_HEADERS${ac_dC}1${ac_dD}
+${ac_dA}HAVE_SYS_TYPES_H${ac_dB}HAVE_SYS_TYPES_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_SYS_STAT_H${ac_dB}HAVE_SYS_STAT_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_STDLIB_H${ac_dB}HAVE_STDLIB_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_STRING_H${ac_dB}HAVE_STRING_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_MEMORY_H${ac_dB}HAVE_MEMORY_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_STRINGS_H${ac_dB}HAVE_STRINGS_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_INTTYPES_H${ac_dB}HAVE_INTTYPES_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_STDINT_H${ac_dB}HAVE_STDINT_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_UNISTD_H${ac_dB}HAVE_UNISTD_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_LONG_LONG${ac_dB}HAVE_LONG_LONG${ac_dC}1${ac_dD}
+${ac_dA}TIME_WITH_SYS_TIME${ac_dB}TIME_WITH_SYS_TIME${ac_dC}1${ac_dD}
+${ac_dA}HAVE_SYS_WAIT_H${ac_dB}HAVE_SYS_WAIT_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_SYS_TIME_H${ac_dB}HAVE_SYS_TIME_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_MALLOC_H${ac_dB}HAVE_MALLOC_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_STDLIB_H${ac_dB}HAVE_STDLIB_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_UNISTD_H${ac_dB}HAVE_UNISTD_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_STDDEF_H${ac_dB}HAVE_STDDEF_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_STDARG_H${ac_dB}HAVE_STDARG_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_ERRNO_H${ac_dB}HAVE_ERRNO_H${ac_dC}1${ac_dD}
+${ac_dA}SHAPE${ac_dB}SHAPE${ac_dC}1${ac_dD}
+${ac_dA}HAVE_GLX${ac_dB}HAVE_GLX${ac_dC}1${ac_dD}
+${ac_dA}HAVE_XPM${ac_dB}HAVE_XPM${ac_dC}1${ac_dD}
+${ac_dA}HAVE_JPEG${ac_dB}HAVE_JPEG${ac_dC}1${ac_dD}
+${ac_dA}HAVE_PROTOTYPES${ac_dB}HAVE_PROTOTYPES${ac_dC}1${ac_dD}
+${ac_dA}HAVE_ZLIB_H${ac_dB}HAVE_ZLIB_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_PNG${ac_dB}HAVE_PNG${ac_dC}1${ac_dD}
+${ac_dA}HAVE_GIF${ac_dB}HAVE_GIF${ac_dC}1${ac_dD}
+${ac_dA}HAVE_BUILTIN_UNGIF${ac_dB}HAVE_BUILTIN_UNGIF${ac_dC}1${ac_dD}
+${ac_dA}HAVE_TIFF${ac_dB}HAVE_TIFF${ac_dC}1${ac_dD}
+${ac_dA}HAVE_FT2BUILD_H${ac_dB}HAVE_FT2BUILD_H${ac_dC}1${ac_dD}
+${ac_dA}HAVE_FREETYPE${ac_dB}HAVE_FREETYPE${ac_dC}1${ac_dD}
+CEOF
+  sed -f $tmp/defines.sed $tmp/in >$tmp/out
+  rm -f $tmp/in
+  mv $tmp/out $tmp/in
+
+  cat >$tmp/defines.sed <<CEOF
+/^[	 ]*#[	 ]*define/!b
+t clr
+: clr
+${ac_dA}HAVE_FREETYPE_FREETYPE${ac_dB}HAVE_FREETYPE_FREETYPE${ac_dC}1${ac_dD}
+${ac_dA}HAVE_DIRENT_H${ac_dB}HAVE_DIRENT_H${ac_dC}1${ac_dD}
+CEOF
+  sed -f $tmp/defines.sed $tmp/in >$tmp/out
+  rm -f $tmp/in
+  mv $tmp/out $tmp/in
+
+  fi # grep
+
+  # Handle all the #undef templates
+  cat >$tmp/undefs.sed <<CEOF
+/^[	 ]*#[	 ]*undef/!b
+t clr
+: clr
+${ac_uA}PACKAGE_NAME${ac_uB}PACKAGE_NAME${ac_uC}"libAfterImage"${ac_uD}
+${ac_uA}PACKAGE_TARNAME${ac_uB}PACKAGE_TARNAME${ac_uC}"libAfterImage.tar"${ac_uD}
+${ac_uA}PACKAGE_VERSION${ac_uB}PACKAGE_VERSION${ac_uC}"1.07"${ac_uD}
+${ac_uA}PACKAGE_STRING${ac_uB}PACKAGE_STRING${ac_uC}"libAfterImage 1.07"${ac_uD}
+${ac_uA}PACKAGE_BUGREPORT${ac_uB}PACKAGE_BUGREPORT${ac_uC}"as-bugs@afterstep.org"${ac_uD}
+${ac_uA}HAVE_MMX${ac_uB}HAVE_MMX${ac_uC}1${ac_uD}
+${ac_uA}STDC_HEADERS${ac_uB}STDC_HEADERS${ac_uC}1${ac_uD}
+${ac_uA}HAVE_SYS_TYPES_H${ac_uB}HAVE_SYS_TYPES_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_SYS_STAT_H${ac_uB}HAVE_SYS_STAT_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_STDLIB_H${ac_uB}HAVE_STDLIB_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_STRING_H${ac_uB}HAVE_STRING_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_MEMORY_H${ac_uB}HAVE_MEMORY_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_STRINGS_H${ac_uB}HAVE_STRINGS_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_INTTYPES_H${ac_uB}HAVE_INTTYPES_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_STDINT_H${ac_uB}HAVE_STDINT_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_UNISTD_H${ac_uB}HAVE_UNISTD_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_LONG_LONG${ac_uB}HAVE_LONG_LONG${ac_uC}1${ac_uD}
+${ac_uA}TIME_WITH_SYS_TIME${ac_uB}TIME_WITH_SYS_TIME${ac_uC}1${ac_uD}
+${ac_uA}HAVE_SYS_WAIT_H${ac_uB}HAVE_SYS_WAIT_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_SYS_TIME_H${ac_uB}HAVE_SYS_TIME_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_MALLOC_H${ac_uB}HAVE_MALLOC_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_STDLIB_H${ac_uB}HAVE_STDLIB_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_UNISTD_H${ac_uB}HAVE_UNISTD_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_STDDEF_H${ac_uB}HAVE_STDDEF_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_STDARG_H${ac_uB}HAVE_STDARG_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_ERRNO_H${ac_uB}HAVE_ERRNO_H${ac_uC}1${ac_uD}
+${ac_uA}SHAPE${ac_uB}SHAPE${ac_uC}1${ac_uD}
+${ac_uA}HAVE_GLX${ac_uB}HAVE_GLX${ac_uC}1${ac_uD}
+${ac_uA}HAVE_XPM${ac_uB}HAVE_XPM${ac_uC}1${ac_uD}
+${ac_uA}HAVE_JPEG${ac_uB}HAVE_JPEG${ac_uC}1${ac_uD}
+${ac_uA}HAVE_PROTOTYPES${ac_uB}HAVE_PROTOTYPES${ac_uC}1${ac_uD}
+${ac_uA}HAVE_ZLIB_H${ac_uB}HAVE_ZLIB_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_PNG${ac_uB}HAVE_PNG${ac_uC}1${ac_uD}
+${ac_uA}HAVE_GIF${ac_uB}HAVE_GIF${ac_uC}1${ac_uD}
+${ac_uA}HAVE_BUILTIN_UNGIF${ac_uB}HAVE_BUILTIN_UNGIF${ac_uC}1${ac_uD}
+${ac_uA}HAVE_TIFF${ac_uB}HAVE_TIFF${ac_uC}1${ac_uD}
+${ac_uA}HAVE_FT2BUILD_H${ac_uB}HAVE_FT2BUILD_H${ac_uC}1${ac_uD}
+${ac_uA}HAVE_FREETYPE${ac_uB}HAVE_FREETYPE${ac_uC}1${ac_uD}
+CEOF
+  sed -f $tmp/undefs.sed $tmp/in >$tmp/out
+  rm -f $tmp/in
+  mv $tmp/out $tmp/in
+
+  cat >$tmp/undefs.sed <<CEOF
+/^[	 ]*#[	 ]*undef/!b
+t clr
+: clr
+${ac_uA}HAVE_FREETYPE_FREETYPE${ac_uB}HAVE_FREETYPE_FREETYPE${ac_uC}1${ac_uD}
+${ac_uA}HAVE_DIRENT_H${ac_uB}HAVE_DIRENT_H${ac_uC}1${ac_uD}
+s,^[	 ]*#[	 ]*undef[	 ][	 ]*[a-zA-Z_][a-zA-Z_0-9]*,/* & */,
+CEOF
+  sed -f $tmp/undefs.sed $tmp/in >$tmp/out
+  rm -f $tmp/in
+  mv $tmp/out $tmp/in
+
+  # Let's still pretend it is `configure' which instantiates (i.e., don't
+  # use $as_me), people would be surprised to read:
+  #    /* config.h.  Generated by config.status.  */
+  if test x"$ac_file" = x-; then
+    echo "/* Generated by configure.  */" >$tmp/config.h
+  else
+    echo "/* $ac_file.  Generated by configure.  */" >$tmp/config.h
+  fi
+  cat $tmp/in >>$tmp/config.h
+  rm -f $tmp/in
+  if test x"$ac_file" != x-; then
+    if diff $ac_file $tmp/config.h >/dev/null 2>&1; then
+      { echo "$as_me:$LINENO: $ac_file is unchanged" >&5
+echo "$as_me: $ac_file is unchanged" >&6;}
+    else
+      ac_dir=`(dirname "$ac_file") 2>/dev/null ||
+$as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	 X"$ac_file" : 'X\(//\)[^/]' \| \
+	 X"$ac_file" : 'X\(//\)$' \| \
+	 X"$ac_file" : 'X\(/\)' \| \
+	 .     : '\(.\)' 2>/dev/null ||
+echo X"$ac_file" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+      { if $as_mkdir_p; then
+    mkdir -p "$ac_dir"
+  else
+    as_dir="$ac_dir"
+    as_dirs=
+    while test ! -d "$as_dir"; do
+      as_dirs="$as_dir $as_dirs"
+      as_dir=`(dirname "$as_dir") 2>/dev/null ||
+$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	 X"$as_dir" : 'X\(//\)[^/]' \| \
+	 X"$as_dir" : 'X\(//\)$' \| \
+	 X"$as_dir" : 'X\(/\)' \| \
+	 .     : '\(.\)' 2>/dev/null ||
+echo X"$as_dir" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+    done
+    test ! -n "$as_dirs" || mkdir $as_dirs
+  fi || { { echo "$as_me:$LINENO: error: cannot create directory \"$ac_dir\"" >&5
+echo "$as_me: error: cannot create directory \"$ac_dir\"" >&2;}
+   { (exit 1); exit 1; }; }; }
+
+      rm -f $ac_file
+      mv $tmp/config.h $ac_file
+    fi
+  else
+    cat $tmp/config.h
+    rm -f $tmp/config.h
+  fi
+done
+
+{ (exit 0); exit 0; }
diff -Nur libAfterImage-1.07/Makefile libAfterImage-1.07.new/Makefile
--- libAfterImage-1.07/Makefile	1970-01-01 01:00:00.000000000 +0100
+++ libAfterImage-1.07.new/Makefile	2006-09-13 12:00:58.000000000 +0100
@@ -0,0 +1,371 @@
+#
+# Copyright (c) 2001, Sasha Vasko <sasha at aftercode.net>
+# Copyright (c) 1998, Guylhem AZNAR <guylhem@oeil.qc.ca>
+#
+
+subdirs = libjpeg libpng libungif zlib
+
+LIBJPEG_OBJS = 	libjpeg/jcapimin.o libjpeg/jcapistd.o libjpeg/jccoefct.o \
+		libjpeg/jccolor.o libjpeg/jcdctmgr.o libjpeg/jchuff.o \
+		libjpeg/jcinit.o libjpeg/jcmainct.o libjpeg/jcmarker.o \
+		libjpeg/jcmaster.o libjpeg/jcomapi.o libjpeg/jcparam.o \
+		libjpeg/jcphuff.o libjpeg/jcprepct.o libjpeg/jcsample.o \
+		libjpeg/jctrans.o libjpeg/jdapimin.o libjpeg/jdapistd.o \
+		libjpeg/jdatadst.o libjpeg/jdatasrc.o libjpeg/jdcoefct.o \
+		libjpeg/jdcolor.o libjpeg/jddctmgr.o libjpeg/jdhuff.o \
+		libjpeg/jdinput.o libjpeg/jdmainct.o libjpeg/jdmarker.o \
+		libjpeg/jdmaster.o libjpeg/jdmerge.o libjpeg/jdphuff.o \
+		libjpeg/jdpostct.o libjpeg/jdsample.o libjpeg/jdtrans.o \
+		libjpeg/jerror.o libjpeg/jfdctflt.o libjpeg/jfdctfst.o \
+		libjpeg/jfdctint.o libjpeg/jidctflt.o libjpeg/jidctfst.o \
+		libjpeg/jidctint.o libjpeg/jidctred.o libjpeg/jquant1.o \
+		libjpeg/jquant2.o libjpeg/jutils.o libjpeg/jmemmgr.o libjpeg/jmemnobs.o
+
+LIBPNG_OBJS = 	libpng/png.o libpng/pngset.o libpng/pngget.o libpng/pngrutil.o \
+		libpng/pngtrans.o libpng/pngwutil.o libpng/pngread.o libpng/pngrio.o \
+		libpng/pngwio.o libpng/pngwrite.o libpng/pngrtran.o \
+		libpng/pngwtran.o libpng/pngmem.o libpng/pngerror.o \
+		libpng/pngpread.o libpng/pnggccrd.o
+
+ZLIB_OBJS = 	zlib/adler32.o 	zlib/compress.o zlib/crc32.o \
+		zlib/gzio.o 	zlib/uncompr.o 	zlib/deflate.o \
+		zlib/trees.o 	zlib/zutil.o 	zlib/inflate.o \
+		zlib/infback.o 	zlib/inftrees.o zlib/inffast.o
+
+LIBUNGIF_OBJS = libungif/dgif_lib.o libungif/egif_lib.o libungif/gifalloc.o libungif/gif_err.o
+
+AFTERIMAGE_OBJS= afterbase.o asimage.o ascmap.o asfont.o asimagexml.o asstorage.o \
+		asvisual.o blender.o bmp.o char2uni.o draw.o export.o imencdec.o import.o \
+		pixmap.o transform.o ungif.o xcf.o ximage.o xpm.o
+
+################################################################
+# library specifics :
+
+LIB_INCS= afterimage.h config.h afterbase.h ascmap.h asfont.h asim_afterbase.h \
+		asimage.h asimagexml.h asstorage.h asvisual.h blender.h bmp.h char2uni.h \
+		draw.h export.h imencdec.h import.h pixmap.h transform.h ungif.h \
+		xcf.h ximage.h xpm.h xwrap.h
+
+LIB_OBJS=          $(LIBUNGIF_OBJS) $(AFTERIMAGE_OBJS)
+
+APPS_SRCS=apps/common.c apps/ascompose.c apps/asview.c \
+		  apps/asscale.c apps/astile.c apps/asmerge.c \
+		  apps/asgrad.c apps/asflip.c apps/astext.c
+
+APPS_INCS=apps/common.h
+
+# end specifics
+################################################################
+# generic makefile stuff :
+
+LIB_DIR_NAME    = libAfterImage
+LIB_NAME        = LIBAFTERIMAGE
+LIB_STATIC      = libAfterImage.a
+LIB_SHARED      = libAfterImage.so
+LIB_SHARED_CYG  = cygAfterImage.dll
+LIB_SHARED_CYG_AR  = libAfterImage.dll.a
+LIBVER          = 0.99
+LIBVERMAJOR     = 0
+
+CC		= gcc
+CCFLAGS         = -O3 -DNO_DEBUG_OUTPUT -fPIC -Wall
+# -march=pentiumpro -mcpu=pentiumpro
+EXTRA_DEFINES	= 
+
+RANLIB		= ranlib
+AR		= ar clq
+CP		= /usr/bin/cp
+MV		= /usr/bin/mv
+RM		= /usr/bin/rm
+RMF		= /usr/bin/rm -f
+MKDIR		= /usr/bin/mkdir
+FIND		= /usr/bin/find
+XARGS		= /usr/bin/xargs
+LDCONFIG	= /sbin/ldconfig
+ROBODOC     = robodoc
+LN_S		= ln -s
+
+YACC		= 
+LEX		= 
+YACCFLAGS	= -d
+LEXFLAGS	=
+
+INSTALL		= /usr/bin/install -c
+INSTALL_PROGRAM	= /usr/bin/install -c -s -m 755
+INSTALL_DATA	= /usr/bin/install -c -m 644
+INSTALL_HEADER	= /usr/bin/install -c -m 644
+INSTALL_LIB	= /usr/bin/install -c -m 755
+INSTALL_SCRIPT	= /usr/bin/install -c -m 755
+
+INCS_EXTRA	=       -I/usr/include/freetype2
+INCS_X		= 
+INCS_PRIVATE    = 
+INCLUDES	= $(INCS_EXTRA) $(INCS_PRIVATE) $(INCS_X)
+
+USER_LD_FLAGS	=  -rdynamic
+LIBS_X		= -lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext
+LIBS_XEXTS	=
+LIBS_TEST	= -L./ -lAfterImage -lfreetype -lz -ltiff -lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm
+LIBS_AFTERIMAGE = -L./ -lfreetype -lz -ltiff -lX11  -L/usr/lib64   -lSM -lICE -lGL -lXext -ljpeg -lpng -lz -lm
+LIBRARIES	= $(LIBS_AFTERIMAGE) $(LIBS_X) $(LIBS_XEXTS)
+LIBRARIES_TEST	= $(LIBS_TEST) $(LIBS_X) $(LIBS_XEXTS)
+
+prefix          = /usr/local
+exec_prefix     = /usr/local
+LIBDIR          = $(DESTDIR)/usr/local/lib
+INCLUDEDIR      = $(DESTDIR)/usr/local/include
+AFTER_INC_DIR	= $(DESTDIR)/usr/local/include/$(LIB_DIR_NAME)
+AFTER_BIN_DIR	= $(DESTDIR)${exec_prefix}/bin
+AFTER_MAN_DIR	= $(DESTDIR)/usr/local/man/man3
+AFTER_APP_MAN_DIR	= $(DESTDIR)/usr/local/man/man1
+AFTER_SHAREDIR	= $(DESTDIR)${prefix}/share/$(LIB_DIR_NAME)
+AFTER_DOC_DIR	= $(AFTER_SHAREDIR)/doc
+
+# We want to build both static and dynamic libs, as some service apps may need 
+# static library as they gets run at compile time (ASDocGen for example)
+# but we only install whats selected
+all:            $(LIB_STATIC) $(LIB_STATIC) $(INSTALLONBUILD) apps
+
+install.bin:
+
+install.lib:	$(LIB_STATIC) install.static install.inc
+
+install.static:
+		$(INSTALL_SCRIPT) afterimage-libs afterimage-config $(AFTER_BIN_DIR)
+		@(if [ -d $(LIBDIR) ] && [ -w $(LIBDIR) ]; then \
+		    echo "$(INSTALL_LIB) $(LIB_STATIC) $(LIBDIR)"; \
+		    $(INSTALL_LIB) $(LIB_STATIC) $(LIBDIR); \
+		    if [ `uname` = "Linux" ]; then \
+			if test $(LIBDIR) = "/lib" || test $(LIBDIR) = "/usr/lib"; then \
+		    	    echo "" > /dev/null; \
+			elif grep -q $(LIBDIR) /etc/ld.so.conf > /dev/null 2>&1; then \
+		    	    echo "" > /dev/null; \
+			else \
+		    	    echo "Unable to find $(LIBDIR) in ld.so.conf. In order to use "; \
+		    	    echo "$(LIB_STATIC), you may need to add it or set LD_LIBRARY_PATH."; \
+			fi; \
+			if test -w /etc; then \
+			    echo "$(LDCONFIG)"; \
+			    $(LDCONFIG); \
+			fi; \
+		    fi ;\
+		fi \
+		)
+
+install.script:
+
+install.dyn:
+		@( echo "$(INSTALL_LIB) $(LIB_SHARED).$(LIBVER) $(LIBDIR)"; \
+		$(INSTALL_LIB) $(LIB_SHARED).$(LIBVER) $(LIBDIR); \
+		$(INSTALL_SCRIPT) afterimage-libs afterimage-config $(AFTER_BIN_DIR); \
+		$(RM) -f $(LIBDIR)/$(LIB_SHARED).$(LIBVERMAJOR) $(LIBDIR)/$(LIB_SHARED); \
+		$(LN_S) -f $(LIB_SHARED).$(LIBVER) $(LIBDIR)/$(LIB_SHARED).$(LIBVERMAJOR); \
+		$(LN_S) -f $(LIB_SHARED).$(LIBVERMAJOR) $(LIBDIR)/$(LIB_SHARED); \
+		if test `uname` = "Linux"; then \
+		   if test $(LIBDIR) = "/lib" || test $(LIBDIR) = "/usr/lib"; then \
+		     echo "" > /dev/null; \
+		   elif grep -q $(LIBDIR) /etc/ld.so.conf > /dev/null 2>&1; then \
+		     echo "" > /dev/null; \
+		   else \
+		     echo "Unable to find $(LIBDIR) in ld.so.conf. In order to use "; \
+		     echo "$(LIB_SHARED), you may need to add it or set LD_LIBRARY_PATH."; \
+		   fi; \
+		   echo "$(LDCONFIG)"; \
+		   $(LDCONFIG); \
+		 fi \
+		)
+
+install.cyg:
+		@( echo "$(INSTALL_LIB) $(LIB_SHARED_CYG) $(AFTER_BIN_DIR)"; \
+		$(INSTALL_LIB) $(LIB_SHARED_CYG) $(AFTER_BIN_DIR); \
+		echo "$(INSTALL_LIB) $(LIB_SHARED_CYG) $(LIBDIR)"; \
+		$(INSTALL_LIB) $(LIB_SHARED_CYG) $(LIBDIR); \
+		echo "$(INSTALL_LIB) $(LIB_SHARED_CYG_AR) $(LIBDIR)"; \
+		$(INSTALL_LIB) $(LIB_SHARED_CYG_AR) $(LIBDIR); \
+		echo "$(INSTALL_SCRIPT) afterimage-libs afterimage-config $(AFTER_BIN_DIR)"; \
+		$(INSTALL_SCRIPT) afterimage-libs afterimage-config $(AFTER_BIN_DIR); \
+		)
+
+install.inc:
+		@(if [ -d $(AFTER_INC_DIR) ]; then \
+		    echo "$(RM) $(AFTER_INC_DIR)/*"; \
+		    $(RM) $(AFTER_INC_DIR)/*; \
+		 else \
+		    if [ -d $(INCLUDEDIR) ]; then \
+		       echo "$(MKDIR) $(AFTER_INC_DIR)"; \
+		       if $(MKDIR) $(AFTER_INC_DIR); then \
+		          echo " ">/dev/null; \
+		       else \
+		    	  echo "failed to create include directory: $(AFTER_INC_DIR)"; \
+		       fi; \
+		    else \
+		       echo "$(MKDIR) $(INCLUDEDIR)"; \
+		       if $(MKDIR) $(INCLUDEDIR); then \
+		          echo "$(MKDIR) $(AFTER_INC_DIR)"; \
+		          if $(MKDIR) $(AFTER_INC_DIR) >/dev/null; then \
+		             echo " ">/dev/null; \
+		          else \
+		             echo "failed to create include directory: $(AFTER_INC_DIR)"; \
+			  fi; \
+		       else \
+		          echo "failed to create include directory: $(INCLUDEDIR)"; \
+		       fi; \
+		    fi; \
+		 fi; \
+		 if [ -d $(AFTER_INC_DIR) ]; then \
+		    for file in $(LIB_INCS) ; do  \
+			echo "$(INSTALL_HEADER) $$file $(AFTER_INC_DIR)"; \
+			$(INSTALL_HEADER) $$file $(AFTER_INC_DIR); \
+		    done; \
+		 fi \
+		)
+
+install.apps: install.lib
+		cd apps; make install; cd ..
+
+uninstall.bin:
+
+uninstall.lib:
+
+uninstall.man:
+
+uninstall.script:
+
+clean:
+		$(RMF) $(LIB_SHARED) $(LIB_SHARED_CYG) $(LIB_SHARED_CYG_AR) $(LIB_STATIC) *.so.* *.so *.o *~ *% *.bak \#* core ; \
+		for I in ${subdirs}; do $(RMF) $$I/*.o $$I/*.obj $$I/*.bak; done; \
+		cd apps; make clean; cd ..
+
+distclean: clean
+		$(RMF) $(LIB_SHARED) $(LIB_SHARED_CYG) $(LIB_SHARED_CYG_AR) $(LIB_STATIC)  *.o *.so.* *~ *% *.bak \#* *.orig core Makefile ; \
+		cd apps; make distclean; cd ..
+
+indent:
+		@SRCS=`echo "$(AFTERIMAGE_OBJS) " | sed "s/.o /.c /g"`; \
+		if test "x$$SRCS" == "x"; then exit; fi; \
+		for i in $$SRCS; do \
+		  if (indent -di14 -ts4 -i4 -l120 -lc80 -bad -nbbb -bli0 -c48 -cd48 -ce -cli1 -ncs -nbs -nbbo -hnl < $$i > /tmp/$$i); then \
+		    echo "indent $$i"; \
+		    mv /tmp/$$i $$i; \
+		  fi; \
+		done ; \
+		cd apps; make indent; cd ..
+
+deps:
+		echo -n > .depend ; \
+		buf="" ; \
+		SRCS=`echo "$(AFTERIMAGE_OBJS) " | sed "s/.o /.c /g"`; \
+		echo -n $(LIB_NAME)_OBJS = > .shared ; \
+		for file in $$SRCS; do \
+		  echo " \\" >> .shared ; \
+		  echo -n '		$$('$(LIB_NAME)_PATH')'/$$file >> .shared ; \
+		  if test "x$$buf" != "x"; then \
+		      echo $$buf >>.depend ; \
+		      echo >>.depend ; \
+		  fi; \
+		  buf="./"`echo "$$file " | sed "s/.c /.o /g"`: ; \
+		  for d in `grep "#include \"" < $$file | awk -F \" '{print $$2}'`; do \
+		      if test "x$$buf" != "x"; then \
+		         echo $$buf \\ >>.depend ; \
+		      fi; \
+		      echo -n "		" >>.depend ; \
+		      buf="$$d "; \
+		  done; \
+		done; \
+		if test "x$$buf" != "x"; then \
+		  echo $$buf >>.depend ; \
+		fi; \
+		echo "">> .shared ; \
+		echo "">> .shared ; \
+		echo -n $(LIB_NAME)_INCS = >> .shared ; \
+		for f in $(LIB_INCS); do \
+		  echo " \\" >> .shared ; \
+		  echo -n '		$$('$(LIB_NAME)_PATH')'/$$f >> .shared ; \
+		done; \
+		echo "" >> .shared ; \
+		cd apps; make deps; cd ..
+
+apps: 	$(LIB_STATIC) $(LIB_OBJS) $(LIB_INCS) $(APPS_SRCS) $(APPS_INCS)
+		cd apps; make ; cd ..
+
+
+$(LIB_STATIC):	$(LIB_OBJS) $(LIB_INCS) config.h
+		$(RMF) $(LIB_STATIC)
+		$(AR) $(LIB_STATIC) $(LIB_OBJS)
+		$(RANLIB) $(LIB_STATIC)
+
+test_asstorage.o: asstorage.c
+		$(CC) $(CCFLAGS) $(EXTRA_DEFINES) -DTEST_ASSTORAGE $(INCLUDES) $(EXTRA_INCLUDES) -c asstorage.c -o test_asstorage.o
+
+test_asstorage:	test_asstorage.o
+		$(CC) test_asstorage.o $(USER_LD_FLAGS)  $(LIBRARIES_TEST) $(EXTRA_LIBRARIES) -o test_asstorage
+
+test_asdraw.o:	draw.c
+		$(CC) $(CCFLAGS) $(EXTRA_DEFINES) -DTEST_ASDRAW $(INCLUDES) $(EXTRA_INCLUDES) -c draw.c -o test_asdraw.o
+
+test_asdraw:	test_asdraw.o
+		$(CC) test_asdraw.o $(USER_LD_FLAGS) $(LIBRARIES_TEST) $(EXTRA_LIBRARIES) -o test_asdraw
+
+
+
+.c.o:
+		$(CC) $(CCFLAGS) $(EXTRA_DEFINES) $(INCLUDES) $(EXTRA_INCLUDES) -c $*.c -o $@
+
+.c.s:
+		$(CC) $(CCFLAGS) $(EXTRA_DEFINES) $(INCLUDES) $(EXTRA_INCLUDES) -S $*.c
+
+#
+# include dependency files if they exist
+#
+# this is merely a precaution, but as it does not work with ansi make
+# we took it out
+#ifneq ($(wildcard .depend),)
+include .depend
+#endif
+
+$(LIB_SHARED_CYG): $(LIB_OBJS) $(LIB_INCS)
+	$(CC) -shared -o $(LIB_SHARED_CYG) \
+    		-Wl,--out-implib=$(LIB_SHARED_CYG_AR) \
+    		-Wl,--export-all-symbols -Wl,--enable-auto-import \
+    		-Wl,--whole-archive ${LIB_OBJS} \
+    		$(USER_LD_FLAGS) -Wl,--no-whole-archive $(LIBRARIES)
+
+$(LIB_SHARED): $(LIB_SHARED).$(LIBVERMAJOR)
+	$(LN_S) -f $(LIB_SHARED).$(LIBVERMAJOR) $(LIB_SHARED)
+
+$(LIB_SHARED).$(LIBVERMAJOR): $(LIB_SHARED).$(LIBVER)
+	$(LN_S) -f $(LIB_SHARED).$(LIBVER) $(LIB_SHARED).$(LIBVERMAJOR)
+
+$(LIB_SHARED).$(LIBVER): $(LIB_OBJS) $(LIB_INCS) config.h
+	$(CC) -shared -Wl,-soname,$(LIB_SHARED).$(LIBVERMAJOR) -o $(LIB_SHARED).$(LIBVER) \
+	 $(LIB_OBJS)
+
+install.man:
+		@if [ -d doc/man ] ; then \
+			cd doc/man; \
+			for f in `ls *.man`; do \
+				page_name=`echo $$f| awk -F . '{print $$1}'`; \
+	  			echo $(INSTALL_DATA) $$page_name.man $(AFTER_MAN_DIR)/$$page_name.1x; \
+	  			$(INSTALL_DATA) $$page_name.man $(AFTER_MAN_DIR)/$$page_name.1x; \
+			done; cd ../..; \
+		fi
+			
+
+install.doc:
+		@if [ -d doc/html ] ; then \
+			if [ ! -d $(AFTER_DOC_DIR)/html ] ; then \
+				$(MKDIR) -p $(AFTER_DOC_DIR)/html; \
+			fi; \
+			cd doc/html; \
+			for f in `ls *.html`; do \
+		  		echo $(INSTALL_DATA) $$f $(AFTER_DOC_DIR)/html/$$f; \
+		  		$(INSTALL_DATA) $$f $(AFTER_DOC_DIR)/html/$$f; \
+			done; \
+			cd ../..; \
+		fi
+
+install:	install.lib install.man install.doc install.apps
+
+
+uninstall:	uninstall.lib
+
diff -Nur libAfterImage-1.07/Makefile.in libAfterImage-1.07.new/Makefile.in
--- libAfterImage-1.07/Makefile.in	2005-06-03 21:44:06.000000000 +0100
+++ libAfterImage-1.07.new/Makefile.in	2006-09-13 15:10:03.000000000 +0100
@@ -78,7 +78,7 @@
 MV		= @MV@
 RM		= @RM@
 RMF		= @RM@ -f
-MKDIR		= @MKDIR@
+MKDIR		= @MKDIR@ -p
 FIND		= @FIND@
 XARGS		= @XARGS@
 LDCONFIG	= @LDCONFIG@
@@ -135,20 +135,6 @@
 		@(if [ -d $(LIBDIR) ] && [ -w $(LIBDIR) ]; then \
 		    echo "$(INSTALL_LIB) $(LIB_STATIC) $(LIBDIR)"; \
 		    $(INSTALL_LIB) $(LIB_STATIC) $(LIBDIR); \
-		    if [ `uname` = "Linux" ]; then \
-			if test $(LIBDIR) = "/lib" || test $(LIBDIR) = "/usr/lib"; then \
-		    	    echo "" > /dev/null; \
-			elif grep -q $(LIBDIR) /etc/ld.so.conf > /dev/null 2>&1; then \
-		    	    echo "" > /dev/null; \
-			else \
-		    	    echo "Unable to find $(LIBDIR) in ld.so.conf. In order to use "; \
-		    	    echo "$(LIB_STATIC), you may need to add it or set LD_LIBRARY_PATH."; \
-			fi; \
-			if test -w /etc; then \
-			    echo "$(LDCONFIG)"; \
-			    $(LDCONFIG); \
-			fi; \
-		    fi ;\
 		fi \
 		)
 
@@ -161,18 +147,6 @@
 		$(RM) -f $(LIBDIR)/$(LIB_SHARED).$(LIBVERMAJOR) $(LIBDIR)/$(LIB_SHARED); \
 		$(LN_S) -f $(LIB_SHARED).$(LIBVER) $(LIBDIR)/$(LIB_SHARED).$(LIBVERMAJOR); \
 		$(LN_S) -f $(LIB_SHARED).$(LIBVERMAJOR) $(LIBDIR)/$(LIB_SHARED); \
-		if test `uname` = "Linux"; then \
-		   if test $(LIBDIR) = "/lib" || test $(LIBDIR) = "/usr/lib"; then \
-		     echo "" > /dev/null; \
-		   elif grep -q $(LIBDIR) /etc/ld.so.conf > /dev/null 2>&1; then \
-		     echo "" > /dev/null; \
-		   else \
-		     echo "Unable to find $(LIBDIR) in ld.so.conf. In order to use "; \
-		     echo "$(LIB_SHARED), you may need to add it or set LD_LIBRARY_PATH."; \
-		   fi; \
-		   echo "$(LDCONFIG)"; \
-		   $(LDCONFIG); \
-		 fi \
 		)
 
 install.cyg:
@@ -221,7 +195,7 @@
 		)
 
 install.apps: install.lib
-		cd apps; make install; cd ..
+		cd apps; $(MAKE) install; cd ..
 
 uninstall.bin:
 
@@ -364,7 +338,7 @@
 			cd ../..; \
 		fi
 
-install:	install.lib install.man install.doc install.apps
+install:	install.lib install.man install.apps
 
 
 uninstall:	uninstall.lib
diff -Nur libAfterImage-1.07/Makefile.in~ libAfterImage-1.07.new/Makefile.in~
--- libAfterImage-1.07/Makefile.in~	1970-01-01 01:00:00.000000000 +0100
+++ libAfterImage-1.07.new/Makefile.in~	2006-09-13 14:25:30.000000000 +0100
@@ -0,0 +1,363 @@
+#
+# Copyright (c) 2001, Sasha Vasko <sasha at aftercode.net>
+# Copyright (c) 1998, Guylhem AZNAR <guylhem@oeil.qc.ca>
+#
+
+subdirs = libjpeg libpng libungif zlib
+
+LIBJPEG_OBJS = 	libjpeg/jcapimin.o libjpeg/jcapistd.o libjpeg/jccoefct.o \
+		libjpeg/jccolor.o libjpeg/jcdctmgr.o libjpeg/jchuff.o \
+		libjpeg/jcinit.o libjpeg/jcmainct.o libjpeg/jcmarker.o \
+		libjpeg/jcmaster.o libjpeg/jcomapi.o libjpeg/jcparam.o \
+		libjpeg/jcphuff.o libjpeg/jcprepct.o libjpeg/jcsample.o \
+		libjpeg/jctrans.o libjpeg/jdapimin.o libjpeg/jdapistd.o \
+		libjpeg/jdatadst.o libjpeg/jdatasrc.o libjpeg/jdcoefct.o \
+		libjpeg/jdcolor.o libjpeg/jddctmgr.o libjpeg/jdhuff.o \
+		libjpeg/jdinput.o libjpeg/jdmainct.o libjpeg/jdmarker.o \
+		libjpeg/jdmaster.o libjpeg/jdmerge.o libjpeg/jdphuff.o \
+		libjpeg/jdpostct.o libjpeg/jdsample.o libjpeg/jdtrans.o \
+		libjpeg/jerror.o libjpeg/jfdctflt.o libjpeg/jfdctfst.o \
+		libjpeg/jfdctint.o libjpeg/jidctflt.o libjpeg/jidctfst.o \
+		libjpeg/jidctint.o libjpeg/jidctred.o libjpeg/jquant1.o \
+		libjpeg/jquant2.o libjpeg/jutils.o libjpeg/jmemmgr.o libjpeg/jmemnobs.o
+
+LIBPNG_OBJS = 	libpng/png.o libpng/pngset.o libpng/pngget.o libpng/pngrutil.o \
+		libpng/pngtrans.o libpng/pngwutil.o libpng/pngread.o libpng/pngrio.o \
+		libpng/pngwio.o libpng/pngwrite.o libpng/pngrtran.o \
+		libpng/pngwtran.o libpng/pngmem.o libpng/pngerror.o \
+		libpng/pngpread.o libpng/pnggccrd.o
+
+ZLIB_OBJS = 	zlib/adler32.o 	zlib/compress.o zlib/crc32.o \
+		zlib/gzio.o 	zlib/uncompr.o 	zlib/deflate.o \
+		zlib/trees.o 	zlib/zutil.o 	zlib/inflate.o \
+		zlib/infback.o 	zlib/inftrees.o zlib/inffast.o
+
+LIBUNGIF_OBJS = libungif/dgif_lib.o libungif/egif_lib.o libungif/gifalloc.o libungif/gif_err.o
+
+AFTERIMAGE_OBJS= @AFTERBASE_C@ asimage.o ascmap.o asfont.o asimagexml.o asstorage.o \
+		asvisual.o blender.o bmp.o char2uni.o draw.o export.o imencdec.o import.o \
+		pixmap.o transform.o ungif.o xcf.o ximage.o xpm.o
+
+################################################################
+# library specifics :
+
+LIB_INCS= afterimage.h config.h afterbase.h ascmap.h asfont.h asim_afterbase.h \
+		asimage.h asimagexml.h asstorage.h asvisual.h blender.h bmp.h char2uni.h \
+		draw.h export.h imencdec.h import.h pixmap.h transform.h ungif.h \
+		xcf.h ximage.h xpm.h xwrap.h
+
+LIB_OBJS=       @JPEG_OBJS@ @ZLIB_OBJS@ @PNG_OBJS@ @UNGIF_OBJS@ $(AFTERIMAGE_OBJS)
+
+APPS_SRCS=apps/common.c apps/ascompose.c apps/asview.c \
+		  apps/asscale.c apps/astile.c apps/asmerge.c \
+		  apps/asgrad.c apps/asflip.c apps/astext.c
+
+APPS_INCS=apps/common.h
+
+# end specifics
+################################################################
+# generic makefile stuff :
+
+LIB_DIR_NAME    = libAfterImage
+LIB_NAME        = LIBAFTERIMAGE
+LIB_STATIC      = libAfterImage.a
+LIB_SHARED      = libAfterImage.so
+LIB_SHARED_CYG  = cygAfterImage.dll
+LIB_SHARED_CYG_AR  = libAfterImage.dll.a
+LIBVER          = 0.99
+LIBVERMAJOR     = 0
+
+CC		= @CC@
+CCFLAGS         = @CFLAGS@
+# -march=pentiumpro -mcpu=pentiumpro
+EXTRA_DEFINES	= @DEFINE_XLOCALE@
+
+RANLIB		= @RANLIB@
+AR		= ar clq
+CP		= @CP@
+MV		= @MV@
+RM		= @RM@
+RMF		= @RM@ -f
+MKDIR		= @MKDIR@ -p
+FIND		= @FIND@
+XARGS		= @XARGS@
+LDCONFIG	= @LDCONFIG@
+ROBODOC     = robodoc
+LN_S		= @LN_S@
+
+YACC		= @YACC@
+LEX		= @LEX@
+YACCFLAGS	= -d
+LEXFLAGS	=
+
+INSTALL		= @INSTALL@
+INSTALL_PROGRAM	= @INSTALL@ -s -m 755
+INSTALL_DATA	= @INSTALL@ -m 644
+INSTALL_HEADER	= @INSTALL@ -m 644
+INSTALL_LIB	= @INSTALL@ -m 755
+INSTALL_SCRIPT	= @INSTALL@ -m 755
+
+INCS_EXTRA	= @XPM_CFLAGS@ @JPEG_CFLAGS@ @PNG_CFLAGS@ @GIF_CFLAGS@ @TIFF_CFLAGS@ @TTF_INCLUDES@
+INCS_X		= @X_CFLAGS@
+INCS_PRIVATE    = 
+INCLUDES	= $(INCS_EXTRA) $(INCS_PRIVATE) $(INCS_X)
+
+USER_LD_FLAGS	= @user_ldflags@
+LIBS_X		= @x_libs@
+LIBS_XEXTS	=
+LIBS_TEST	= @AFTERIMAGE_TEST_LIBS@
+LIBS_AFTERIMAGE = @AFTERIMAGE_LIB_LIBS@
+LIBRARIES	= $(LIBS_AFTERIMAGE) $(LIBS_X) $(LIBS_XEXTS)
+LIBRARIES_TEST	= $(LIBS_TEST) $(LIBS_X) $(LIBS_XEXTS)
+
+prefix          = @prefix@
+exec_prefix     = @exec_prefix@
+LIBDIR          = $(DESTDIR)@libdir@
+INCLUDEDIR      = $(DESTDIR)@includedir@
+AFTER_INC_DIR	= $(DESTDIR)@includedir@/$(LIB_DIR_NAME)
+AFTER_BIN_DIR	= $(DESTDIR)@bindir@
+AFTER_MAN_DIR	= $(DESTDIR)@mandir@/man3
+AFTER_APP_MAN_DIR	= $(DESTDIR)@mandir@/man1
+AFTER_SHAREDIR	= $(DESTDIR)@datadir@/$(LIB_DIR_NAME)
+AFTER_DOC_DIR	= $(AFTER_SHAREDIR)/doc
+
+# We want to build both static and dynamic libs, as some service apps may need 
+# static library as they gets run at compile time (ASDocGen for example)
+# but we only install whats selected
+all:            $(LIB_STATIC) @LIBPROG@ $(INSTALLONBUILD) apps
+
+install.bin:
+
+install.lib:	@LIBPROG@ @LIBINSTALL@ install.inc
+
+install.static:
+		$(INSTALL_SCRIPT) afterimage-libs afterimage-config $(AFTER_BIN_DIR)
+		@(if [ -d $(LIBDIR) ] && [ -w $(LIBDIR) ]; then \
+		    echo "$(INSTALL_LIB) $(LIB_STATIC) $(LIBDIR)"; \
+		    $(INSTALL_LIB) $(LIB_STATIC) $(LIBDIR); \
+		    if [ `uname` = "Linux" ]; then \
+			if test $(LIBDIR) = "/lib" || test $(LIBDIR) = "/usr/lib"; then \
+		    	    echo "" > /dev/null; \
+			elif grep -q $(LIBDIR) /etc/ld.so.conf > /dev/null 2>&1; then \
+		    	    echo "" > /dev/null; \
+			else \
+		    	    echo "Unable to find $(LIBDIR) in ld.so.conf. In order to use "; \
+		    	    echo "$(LIB_STATIC), you may need to add it or set LD_LIBRARY_PATH."; \
+			fi; \
+			if test -w /etc; then \
+			    echo "$(LDCONFIG)"; \
+			    $(LDCONFIG); \
+			fi; \
+		    fi ;\
+		fi \
+		)
+
+install.script:
+
+install.dyn:
+		@( echo "$(INSTALL_LIB) $(LIB_SHARED).$(LIBVERMAJOR) $(LIBDIR)"; \
+		$(INSTALL_LIB) $(LIB_SHARED).$(LIBVERMAJOR) $(LIBDIR); \
+		$(INSTALL_SCRIPT) afterimage-libs afterimage-config $(AFTER_BIN_DIR); \
+		$(RM) -f $(LIBDIR)/$(LIB_SHARED); \
+		$(LN_S) -f $(LIB_SHARED).$(LIBVERMAJOR) $(LIBDIR)/$(LIB_SHARED); \
+		if test `uname` = "Linux"; then \
+		   if test $(LIBDIR) = "/lib" || test $(LIBDIR) = "/usr/lib"; then \
+		     echo "" > /dev/null; \
+		   elif grep -q $(LIBDIR) /etc/ld.so.conf > /dev/null 2>&1; then \
+		     echo "" > /dev/null; \
+		   else \
+		     echo "Unable to find $(LIBDIR) in ld.so.conf. In order to use "; \
+		     echo "$(LIB_SHARED), you may need to add it or set LD_LIBRARY_PATH."; \
+		   fi; \
+		   echo "$(LDCONFIG)"; \
+		   $(LDCONFIG); \
+		 fi \
+		)
+
+install.cyg:
+		@( echo "$(INSTALL_LIB) $(LIB_SHARED_CYG) $(AFTER_BIN_DIR)"; \
+		$(INSTALL_LIB) $(LIB_SHARED_CYG) $(AFTER_BIN_DIR); \
+		echo "$(INSTALL_LIB) $(LIB_SHARED_CYG) $(LIBDIR)"; \
+		$(INSTALL_LIB) $(LIB_SHARED_CYG) $(LIBDIR); \
+		echo "$(INSTALL_LIB) $(LIB_SHARED_CYG_AR) $(LIBDIR)"; \
+		$(INSTALL_LIB) $(LIB_SHARED_CYG_AR) $(LIBDIR); \
+		echo "$(INSTALL_SCRIPT) afterimage-libs afterimage-config $(AFTER_BIN_DIR)"; \
+		$(INSTALL_SCRIPT) afterimage-libs afterimage-config $(AFTER_BIN_DIR); \
+		)
+
+install.inc:
+		@(if [ -d $(AFTER_INC_DIR) ]; then \
+		    echo "$(RM) $(AFTER_INC_DIR)/*"; \
+		    $(RM) $(AFTER_INC_DIR)/*; \
+		 else \
+		    if [ -d $(INCLUDEDIR) ]; then \
+		       echo "$(MKDIR) $(AFTER_INC_DIR)"; \
+		       if $(MKDIR) $(AFTER_INC_DIR); then \
+		          echo " ">/dev/null; \
+		       else \
+		    	  echo "failed to create include directory: $(AFTER_INC_DIR)"; \
+		       fi; \
+		    else \
+		       echo "$(MKDIR) $(INCLUDEDIR)"; \
+		       if $(MKDIR) $(INCLUDEDIR); then \
+		          echo "$(MKDIR) $(AFTER_INC_DIR)"; \
+		          if $(MKDIR) $(AFTER_INC_DIR) >/dev/null; then \
+		             echo " ">/dev/null; \
+		          else \
+		             echo "failed to create include directory: $(AFTER_INC_DIR)"; \
+			  fi; \
+		       else \
+		          echo "failed to create include directory: $(INCLUDEDIR)"; \
+		       fi; \
+		    fi; \
+		 fi; \
+		 if [ -d $(AFTER_INC_DIR) ]; then \
+		    for file in $(LIB_INCS) ; do  \
+			echo "$(INSTALL_HEADER) $$file $(AFTER_INC_DIR)"; \
+			$(INSTALL_HEADER) $$file $(AFTER_INC_DIR); \
+		    done; \
+		 fi \
+		)
+
+install.apps: install.lib
+		cd apps; $(MAKE) install; cd ..
+
+uninstall.bin:
+
+uninstall.lib:
+
+uninstall.man:
+
+uninstall.script:
+
+clean:
+		$(RMF) $(LIB_SHARED) $(LIB_SHARED_CYG) $(LIB_SHARED_CYG_AR) $(LIB_STATIC) *.so.* *.so *.o *~ *% *.bak \#* core ; \
+		for I in ${subdirs}; do $(RMF) $$I/*.o $$I/*.obj $$I/*.bak; done; \
+		cd apps; make clean; cd ..
+
+distclean: clean
+		$(RMF) $(LIB_SHARED) $(LIB_SHARED_CYG) $(LIB_SHARED_CYG_AR) $(LIB_STATIC)  *.o *.so.* *~ *% *.bak \#* *.orig core Makefile ; \
+		cd apps; make distclean; cd ..
+
+indent:
+		@SRCS=`echo "$(AFTERIMAGE_OBJS) " | sed "s/.o /.c /g"`; \
+		if test "x$$SRCS" == "x"; then exit; fi; \
+		for i in $$SRCS; do \
+		  if (indent -di14 -ts4 -i4 -l120 -lc80 -bad -nbbb -bli0 -c48 -cd48 -ce -cli1 -ncs -nbs -nbbo -hnl < $$i > /tmp/$$i); then \
+		    echo "indent $$i"; \
+		    mv /tmp/$$i $$i; \
+		  fi; \
+		done ; \
+		cd apps; make indent; cd ..
+
+deps:
+		echo -n > .depend ; \
+		buf="" ; \
+		SRCS=`echo "$(AFTERIMAGE_OBJS) " | sed "s/.o /.c /g"`; \
+		echo -n $(LIB_NAME)_OBJS = > .shared ; \
+		for file in $$SRCS; do \
+		  echo " \\" >> .shared ; \
+		  echo -n '		$$('$(LIB_NAME)_PATH')'/$$file >> .shared ; \
+		  if test "x$$buf" != "x"; then \
+		      echo $$buf >>.depend ; \
+		      echo >>.depend ; \
+		  fi; \
+		  buf="./"`echo "$$file " | sed "s/.c /.o /g"`: ; \
+		  for d in `grep "#include \"" < $$file | awk -F \" '{print $$2}'`; do \
+		      if test "x$$buf" != "x"; then \
+		         echo $$buf \\ >>.depend ; \
+		      fi; \
+		      echo -n "		" >>.depend ; \
+		      buf="$$d "; \
+		  done; \
+		done; \
+		if test "x$$buf" != "x"; then \
+		  echo $$buf >>.depend ; \
+		fi; \
+		echo "">> .shared ; \
+		echo "">> .shared ; \
+		echo -n $(LIB_NAME)_INCS = >> .shared ; \
+		for f in $(LIB_INCS); do \
+		  echo " \\" >> .shared ; \
+		  echo -n '		$$('$(LIB_NAME)_PATH')'/$$f >> .shared ; \
+		done; \
+		echo "" >> .shared ; \
+		cd apps; make deps; cd ..
+
+apps: 	@LIBPROG@ $(LIB_OBJS) $(LIB_INCS) $(APPS_SRCS) $(APPS_INCS)
+		cd apps; make ; cd ..
+
+
+$(LIB_STATIC):	$(LIB_OBJS) $(LIB_INCS) config.h
+		$(RMF) $(LIB_STATIC)
+		$(AR) $(LIB_STATIC) $(LIB_OBJS)
+		$(RANLIB) $(LIB_STATIC)
+
+test_asstorage.o: asstorage.c
+		$(CC) $(CCFLAGS) $(EXTRA_DEFINES) -DTEST_ASSTORAGE $(INCLUDES) $(EXTRA_INCLUDES) -c asstorage.c -o test_asstorage.o
+
+test_asstorage:	test_asstorage.o
+		$(CC) test_asstorage.o $(USER_LD_FLAGS)  $(LIBRARIES_TEST) $(EXTRA_LIBRARIES) -o test_asstorage
+
+test_asdraw.o:	draw.c
+		$(CC) $(CCFLAGS) $(EXTRA_DEFINES) -DTEST_ASDRAW $(INCLUDES) $(EXTRA_INCLUDES) -c draw.c -o test_asdraw.o
+
+test_asdraw:	test_asdraw.o
+		$(CC) test_asdraw.o $(USER_LD_FLAGS) $(LIBRARIES_TEST) $(EXTRA_LIBRARIES) -o test_asdraw
+
+
+
+.c.o:
+		$(CC) $(CCFLAGS) $(EXTRA_DEFINES) $(INCLUDES) $(EXTRA_INCLUDES) -c $*.c -o $@
+
+.c.s:
+		$(CC) $(CCFLAGS) $(EXTRA_DEFINES) $(INCLUDES) $(EXTRA_INCLUDES) -S $*.c
+
+#
+# include dependency files if they exist
+#
+# this is merely a precaution, but as it does not work with ansi make
+# we took it out
+#ifneq ($(wildcard .depend),)
+include .depend
+#endif
+
+$(LIB_SHARED_CYG): $(LIB_OBJS) $(LIB_INCS)
+	$(CC) -shared -o $(LIB_SHARED_CYG) \
+	  	-Wl,--out-implib=$(LIB_SHARED_CYG_AR) \
+		-Wl,--export-all-symbols -Wl,--enable-auto-import \
+		-Wl,--whole-archive ${LIB_OBJS} \
+		$(USER_LD_FLAGS) -Wl,--no-whole-archive $(LIBRARIES)
+
+$(LIB_SHARED).$(LIBVERMAJOR): $(LIB_OBJS) $(LIB_INCS) config.h
+	$(CC) -shared -Wl,-soname,$(LIB_SHARED).$(LIBVERMAJOR) -o $(LIB_SHARED).$(LIBVERMAJOR) \
+	$(LIB_OBJS)
+
+install.man:
+		@if [ -d doc/man ] ; then \
+			cd doc/man; \
+			for f in `ls *.man`; do \
+				page_name=`echo $$f| awk -F . '{print $$1}'`; \
+	  			echo $(INSTALL_DATA) $$page_name.man $(AFTER_MAN_DIR)/$$page_name.1x; \
+	  			$(INSTALL_DATA) $$page_name.man $(AFTER_MAN_DIR)/$$page_name.1x; \
+			done; cd ../..; \
+		fi
+
+install.doc:
+		@if [ -d doc/html ] ; then \
+			if [ ! -d $(AFTER_DOC_DIR)/html ] ; then \
+				$(MKDIR) -p $(AFTER_DOC_DIR)/html; \
+			fi; \
+			cd doc/html; \
+			for f in `ls *.html`; do \
+		  		echo $(INSTALL_DATA) $$f $(AFTER_DOC_DIR)/html/$$f; \
+		  		$(INSTALL_DATA) $$f $(AFTER_DOC_DIR)/html/$$f; \
+			done; \
+			cd ../..; \
+		fi
+
+install:	install.lib install.man install.apps
+
+
+uninstall:	uninstall.lib
+
