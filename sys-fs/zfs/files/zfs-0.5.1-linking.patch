From c988247c3ae101d17a32a7817632e0f2bbe1e715 Mon Sep 17 00:00:00 2001
From: Sebastian Pipping <sebastian@pipping.org>
Date: Wed, 14 Jul 2010 01:44:21 +0200
Subject: [PATCH] Fix link errors

---
 lib/libspl/Makefile.am   |    2 ++
 lib/libuutil/Makefile.am |    2 ++
 lib/libzfs/Makefile.am   |    6 ++++++
 lib/libzpool/Makefile.am |    5 +++++
 4 files changed, 15 insertions(+), 0 deletions(-)

diff --git a/lib/libspl/Makefile.am b/lib/libspl/Makefile.am
index c4bdcef..9f5bd94 100644
--- a/lib/libspl/Makefile.am
+++ b/lib/libspl/Makefile.am
@@ -11,6 +11,8 @@ AM_CCASFLAGS = \
 
 lib_LTLIBRARIES = libspl.la
 
+libspl_la_LDFLAGS = -lrt
+
 libspl_la_SOURCES = \
 	${top_srcdir}/lib/libspl/getexecname.c \
 	${top_srcdir}/lib/libspl/gethrtime.c \
diff --git a/lib/libuutil/Makefile.am b/lib/libuutil/Makefile.am
index 78eb75e..4f7c395 100644
--- a/lib/libuutil/Makefile.am
+++ b/lib/libuutil/Makefile.am
@@ -7,6 +7,8 @@ DEFAULT_INCLUDES += \
 
 lib_LTLIBRARIES = libuutil.la
 
+libuutil_la_LIBADD = ${top_srcdir}/lib/libavl/libavl.la
+
 libuutil_la_SOURCES = \
 	${top_srcdir}/lib/libuutil/uu_alloc.c \
 	${top_srcdir}/lib/libuutil/uu_avl.c \
diff --git a/lib/libzfs/Makefile.am b/lib/libzfs/Makefile.am
index 7ffd81c..59b5058 100644
--- a/lib/libzfs/Makefile.am
+++ b/lib/libzfs/Makefile.am
@@ -16,6 +16,12 @@ DEFAULT_INCLUDES += \
 
 lib_LTLIBRARIES = libzfs.la
 
+libzfs_la_LDFLAGS = -lm
+
+libzfs_la_LIBADD = \
+	${top_srcdir}/lib/libefi/libefi.la \
+	${top_srcdir}/lib/libuutil/libuutil.la
+
 libzfs_la_SOURCES = \
 	${top_srcdir}/lib/libzfs/libzfs_changelist.c \
 	${top_srcdir}/lib/libzfs/libzfs_config.c \
diff --git a/lib/libzpool/Makefile.am b/lib/libzpool/Makefile.am
index 039d7f6..0ad3fdf 100644
--- a/lib/libzpool/Makefile.am
+++ b/lib/libzpool/Makefile.am
@@ -13,6 +13,11 @@ DEFAULT_INCLUDES += \
 
 lib_LTLIBRARIES = libzpool.la
 
+libzpool_la_LIBADD = \
+	${top_srcdir}/lib/libunicode/libunicode.la \
+	${top_srcdir}/lib/libavl/libavl.la \
+	${top_srcdir}/lib/libspl/libspl.la
+
 libzpool_la_SOURCES = \
 	${top_srcdir}/lib/libzpool/kernel.c \
 	${top_srcdir}/lib/libzpool/taskq.c \
-- 
1.7.0.1.61.gdc05d.dirty

