diff -u -urN heimdal-20060407-old/cf/db.m4 heimdal-20060407/cf/db.m4
--- heimdal-20060407-old/cf/db.m4	2006-04-07 15:20:53.000000000 -0400
+++ heimdal-20060407/cf/db.m4	2006-04-07 15:49:24.000000000 -0400
@@ -18,24 +18,13 @@
 
 if test "$enable_berkeley_db" != no; then
 
-  AC_CHECK_HEADERS([				\
-	db4/db.h				\
-	db3/db.h				\
-	db.h					\
-	db_185.h				\
-  ])
+  AC_CHECK_HEADERS([db.h])
 
 dnl db_create is used by db3 and db4
 
-  AC_FIND_FUNC_NO_LIBS(db_create, db4 db3 db, [
+  AC_FIND_FUNC_NO_LIBS(db_create, db, [
   #include <stdio.h>
-  #ifdef HAVE_DB4_DB_H
-  #include <db4/db.h>
-  #elif defined(HAVE_DB3_DB_H)
-  #include <db3/db.h>
-  #else
   #include <db.h>
-  #endif
   ],[NULL, NULL, 0])
 
   if test "$ac_cv_func_db_create" = "yes"; then
@@ -50,17 +39,9 @@
 
 dnl dbopen is used by db1/db2
 
-    AC_FIND_FUNC_NO_LIBS(dbopen, db2 db, [
+    AC_FIND_FUNC_NO_LIBS(dbopen, db, [
     #include <stdio.h>
-    #if defined(HAVE_DB2_DB_H)
-    #include <db2/db.h>
-    #elif defined(HAVE_DB_185_H)
-    #include <db_185.h>
-    #elif defined(HAVE_DB_H)
     #include <db.h>
-    #else
-    #error no db.h
-    #endif
     ],[NULL, 0, 0, 0, NULL])
 
     if test "$ac_cv_func_dbopen" = "yes"; then
diff -u -urN heimdal-20060407-old/lib/hdb/db3.c heimdal-20060407/lib/hdb/db3.c
--- heimdal-20060407-old/lib/hdb/db3.c	2005-12-13 06:53:23.000000000 -0500
+++ heimdal-20060407/lib/hdb/db3.c	2006-04-07 15:40:07.000000000 -0400
@@ -37,13 +37,7 @@
 
 #if HAVE_DB3
 
-#ifdef HAVE_DB4_DB_H
-#include <db4/db.h>
-#elif defined(HAVE_DB3_DB_H)
-#include <db3/db.h>
-#else
 #include <db.h>
-#endif
 
 static krb5_error_code
 DB_close(krb5_context context, HDB *db)
diff -u -urN heimdal-20060407-old/lib/hdb/db.c heimdal-20060407/lib/hdb/db.c
--- heimdal-20060407-old/lib/hdb/db.c	2005-12-13 06:52:55.000000000 -0500
+++ heimdal-20060407/lib/hdb/db.c	2006-04-07 15:33:24.000000000 -0400
@@ -37,11 +37,7 @@
 
 #if HAVE_DB1
 
-#if defined(HAVE_DB_185_H)
-#include <db_185.h>
-#elif defined(HAVE_DB_H)
 #include <db.h>
-#endif
 
 static krb5_error_code
 DB_close(krb5_context context, HDB *db)
diff -u -urN heimdal-20060407-old/lib/roken/getcap.c heimdal-20060407/lib/roken/getcap.c
--- heimdal-20060407-old/lib/roken/getcap.c	2006-01-13 09:25:32.000000000 -0500
+++ heimdal-20060407/lib/roken/getcap.c	2006-04-07 15:32:06.000000000 -0400
@@ -38,11 +38,13 @@
 #include "roken.h"
 RCSID("$Id: getcap.c,v 1.11 2006/01/13 14:25:32 lha Exp $");
 
+#if defined(HAVE_DBOPEN) && defined(HAVE_DB_H)
+#define USE_DB
+#endif
+
 #include <sys/types.h>
 #include <ctype.h>
-#if defined(HAVE_DB_185_H)
-#include <db_185.h>
-#elif defined(HAVE_DB_H)
+#ifdef USE_DB
 #include <db.h>
 #endif
 #include <errno.h>	
@@ -69,15 +71,6 @@
 static char	*toprec;	/* Additional record specified by cgetset() */
 static int	 gottoprec;	/* Flag indicating retrieval of toprecord */
 
-#if 0 /*
-       * Don't use db support unless its build into libc but we dont
-       * check for that now, so just disable the code.
-       */
-#if defined(HAVE_DBOPEN) && defined(HAVE_DB_H)
-#define USE_DB
-#endif
-#endif
-
 #ifdef USE_DB
 static int	cdbget (DB *, char **, const char *);
 #endif
