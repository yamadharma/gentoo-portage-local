Index: kalgebra/src/CMakeLists.txt
===================================================================
--- kalgebra/src/CMakeLists.txt	(revision 767350)
+++ kalgebra/src/CMakeLists.txt	(working copy)
@@ -10,7 +10,6 @@
 	functionedit.cpp
 	varedit.cpp
 	main.cpp
-	graph3d.cpp
 	expressionedit.cpp
 	graph2d.cpp
 	operatorsmodel.cpp
@@ -20,6 +19,10 @@
 	functionsmodel.cpp
 )
 
+if(OPENGL_FOUND)
+   set(kalgebra_SRCS ${kalgebra_SRCS} graph3d.cpp)
+endif(OPENGL_FOUND)
+
 kde4_add_executable(kalgebra ${kalgebra_SRCS})
 target_link_libraries(kalgebra ${KDE4_KHTML_LIBS} analitza)
 
