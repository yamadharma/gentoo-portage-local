#! /bin/sh -e
if [ $# -ne 1 ]; then 
    echo >&2 "`basename $0`: script expects -patch|-unpatch as argument"
    exit 1  
fi
case "$1" in 
    -patch) patch -f --no-backup-if-mismatch -p1 < $0;;
    -unpatch) patch -f --no-backup-if-mismatch -R -p1 < $0;;
    *)
        echo >&2 "`basename $0`: script expects -patch|-unpatch as argument"
        exit 1;;
esac

exit 0

@DPATCH@
diff -rN -u old-ion3/mod_tiling/placement.c new-ion3/mod_tiling/placement.c
--- old-ion3/mod_tiling/placement.c	2006-10-31 20:04:00.000000000 +0100
+++ new-ion3/mod_tiling/placement.c	2006-10-31 20:04:00.000000000 +0100
@@ -46,7 +46,7 @@
     
     mp=manageparams_to_table(param->mp);
     
-    extl_table_sets_o(t, "ws", (Obj*)param->ws);
+    extl_table_sets_o(t, "tiling", (Obj*)param->ws);
     extl_table_sets_o(t, "reg", (Obj*)param->reg);
     extl_table_sets_t(t, "mp", mp);
     
@@ -57,7 +57,7 @@
     extl_unprotect(NULL);
     
     if(ret){
-        Obj *tmp;
+        Obj *tmp=NULL;
         
         extl_table_gets_o(t, "res_frame", &tmp);
         

